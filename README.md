
<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/569ce4b8f30dc480-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/f30152c0704fba31.css?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/d162e991e7f49167.css?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-acbbbb548492d4a6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3"/><script src="/_next/static/chunks/4bd1b696-cebf68b71ed1e85d.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/1684-f23c1d6549f1d235.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/main-app-8ab5af3d6b81086e.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/5009-cf1c1739f4eccbfa.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/3377-d302682beb4206f6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/6671-b0da8a89e8d16b02.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/9853-ba5965ca136d44c2.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/app/layout-54da70140f7127e0.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/c16f53c3-c80d3b6d0c4af7a0.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/537-d9d5e9261de3e69c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/2136-0f8d797058c844d4.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/9970-05da82a5b9af6015.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/1235-2bb070afbba964c5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/4889-88dda955466eba30.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/168-d8e567d7acd9a9f8.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/2193-bd88dde7e3a2e1a4.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/8335-cd2a11b5dbfe138d.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/app/%5Borg%5D/%5Brepo%5D/%5B%5B...wikiRoutes%5D%5D/page-dfd2d90d0481fb54.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/7bf36345-20a79815585d2583.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/7646-a48026d39d9219b5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/3449-34296dd8d39c9ba6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/4393-60e403da10f49831.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/5805-44d30e670d12436d.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script src="/_next/static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-f6177459e9003494.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><meta name="next-size-adjust" content=""/><title>CI/CD Pipeline | Mustafaibra/Iac-app | DeepWiki</title><meta name="description" content="This document provides a comprehensive overview of the Continuous Integration and Continuous Deployment (CI/CD) pipeline implemented in the Iac-app repository. The pipeline automates the process of va"/><meta property="og:title" content="CI/CD Pipeline | Mustafaibra/Iac-app | DeepWiki"/><meta property="og:description" content="This document provides a comprehensive overview of the Continuous Integration and Continuous Deployment (CI/CD) pipeline implemented in the Iac-app repository. The pipeline automates the process of va"/><meta property="og:url" content="https://deepwiki.com/Mustafaibra/Iac-app/2-cicd-pipeline"/><meta property="og:site_name" content="DeepWiki"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="CI/CD Pipeline | Mustafaibra/Iac-app | DeepWiki"/><meta name="twitter:description" content="This document provides a comprehensive overview of the Continuous Integration and Continuous Deployment (CI/CD) pipeline implemented in the Iac-app repository. The pipeline automates the process of va"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="48x48"/><link rel="icon" href="/icon.png?66aaf51e0e68c818" type="image/png" sizes="16x16"/><link rel="apple-touch-icon" href="/apple-icon.png?a4f658907db0ab87" type="image/png" sizes="180x180"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" noModule=""></script></head><body class="__variable_5cfdac font-geist-sans relative min-h-screen __variable_9a8899 bg-background antialiased"><section aria-label="Notifications alt+T" tabindex="-1" aria-live="polite" aria-relevant="additions text" aria-atomic="false"></section><script>((e,t,r,n,a,o,i,s)=>{let u=document.documentElement,l=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&o?a.map(e=>o[e]||e):a;r?(u.classList.remove(...n),u.classList.add(o&&o[t]?o[t]:t)):u.setAttribute(e,t)}),r=t,s&&l.includes(r)&&(u.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}})("class","theme","light",null,["light","dark"],null,true,true)</script><div class="flex min-h-screen w-full flex-col text-white" id="codebase-wiki-repo-page"><div class="bg-main border-b-border sticky top-0 z-30 border-b border-dashed"><div class="font-geist-mono relative flex h-8 items-center justify-center text-xs font-medium text-white sm:hidden"><div class="powered-by-devin-gradient absolute inset-0 z-[-1] h-8 w-full"></div><a target="_blank" rel="noopener noreferrer" class="flex items-center gap-2" href="https://devin.ai"><svg class="size-3 [&amp;_path]:stroke-0 [&amp;_path]:animate-[custom-pulse_1.8s_infinite_var(--delay,0s)]" xmlns="http://www.w3.org/2000/svg" viewBox="110 110 460 500"><path style="fill:#21c19a" class="[--delay:0.6s]" d="M418.73,332.37c9.84-5.68,22.07-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.58,1.06.19.06.37.11.55.16.87.21,1.76.34,2.65.35.04,0,.08.02.13.02.1,0,.19-.03.29-.04.83-.02,1.64-.13,2.45-.32.14-.03.28-.05.42-.09.87-.24,1.7-.59,2.5-1.03.08-.04.17-.06.25-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.06,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.57-1.06-.19-.06-.37-.11-.56-.16-.88-.21-1.76-.34-2.65-.34-.13,0-.26.02-.4.02-.84.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.24.1.8.44,1.64.79,2.5,1.03.14.04.28.06.42.09.81.19,1.62.3,2.45.32.1,0,.19.04.29.04.04,0,.08-.02.13-.02.89,0,1.77-.13,2.65-.35.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.58-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-.08-.04-.16-.06-.24-.1-.8-.44-1.64-.8-2.51-1.04-.13-.04-.26-.05-.39-.09-.82-.2-1.65-.31-2.49-.33-.13,0-.25-.02-.38-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.75.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.07,5.68-31.9,0-9.84-5.68-15.95-16.27-15.95-27.63s6.11-21.95,15.95-27.63Z"></path><path style="fill:#3969ca" d="M141.09,317.65l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c.08-.04.13-.11.2-.16.78-.48,1.51-1.02,2.15-1.66.1-.1.18-.21.28-.31.57-.6,1.08-1.26,1.51-1.97.07-.12.15-.22.22-.34.44-.77.77-1.6,1.03-2.47.05-.19.1-.37.14-.56.22-.89.37-1.81.37-2.76v-29.43c0-11.36,6.11-21.95,15.96-27.63s22.06-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.57,1.06.19.06.37.11.56.16.87.21,1.76.34,2.64.35.04,0,.09.02.13.02.1,0,.19-.04.29-.04.83-.02,1.65-.13,2.45-.32.14-.03.28-.05.41-.09.87-.24,1.71-.6,2.51-1.04.08-.04.16-.06.24-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.07,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.58-1.06-.19-.06-.37-.11-.55-.16-.88-.21-1.76-.34-2.65-.35-.13,0-.26.02-.4.02-.83.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22Z"></path><path style="fill:#0294de" class="[--delay:1.2s]" d="M396.88,484.35l-50.97-29.43c-.08-.04-.17-.06-.24-.1-.8-.44-1.64-.79-2.51-1.03-.14-.04-.27-.06-.41-.09-.81-.19-1.64-.3-2.47-.32-.13,0-.26-.02-.39-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.76.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.06,5.68-31.9,0-9.84-5.68-15.96-16.27-15.96-27.63v-29.43c0-.95-.15-1.87-.37-2.76-.05-.19-.09-.37-.14-.56-.25-.86-.59-1.69-1.03-2.47-.07-.12-.15-.22-.22-.34-.43-.71-.94-1.37-1.51-1.97-.1-.1-.18-.21-.28-.31-.65-.63-1.37-1.18-2.15-1.66-.07-.04-.13-.11-.2-.16l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.25.1.8.44,1.63.79,2.5,1.03.14.04.29.06.43.09.8.19,1.61.3,2.43.32.1,0,.2.04.3.04.04,0,.09-.02.13-.02.88,0,1.77-.13,2.64-.34.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.57-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22Z"></path></svg>Powered by Devin</a></div><div class="container-wrapper"><div class="container mx-auto flex w-full flex-row items-center gap-2 py-4 md:py-6"><a class="flex items-center gap-3" href="https://deepwiki.com"><span class="text-base font-medium leading-none text-white md:text-lg hidden sm:block">DeepWiki</span></a><div class="flex-1"><div class="flex flex-col gap-1"><a class="block text-xs font-medium leading-none text-white sm:hidden md:text-lg" href="/">DeepWiki</a><p class="text-text-secondary text-sm font-normal leading-none md:text-lg"><a href="https://github.com/Mustafaibra/Iac-app" target="_blank" rel="noopener noreferrer" class="text-[#8f8f8f] transition-colors hover:text-black dark:hover:text-white">Mustafaibra/Iac-app</a></p></div></div><div class="flex items-center gap-4"><a href="https://devin.ai" target="_blank" rel="noopener noreferrer" class="group hidden items-center gap-1.5 md:flex"><div class="relative"><span class="text-xs font-light text-white/70 transition-colors group-hover:text-white">powered by</span><div class="absolute bottom-0 left-0 h-[1px] w-0 bg-black/30 transition-all duration-300 group-hover:w-full dark:bg-white/30"></div></div><div class="flex items-center gap-1 transition-transform duration-300 group-hover:translate-x-0.5"><svg class="size-4 transform transition-transform duration-700 group-hover:rotate-180 [&amp;_path]:stroke-0" xmlns="http://www.w3.org/2000/svg" viewBox="110 110 460 500"><path style="fill:#21c19a" class="" d="M418.73,332.37c9.84-5.68,22.07-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.58,1.06.19.06.37.11.55.16.87.21,1.76.34,2.65.35.04,0,.08.02.13.02.1,0,.19-.03.29-.04.83-.02,1.64-.13,2.45-.32.14-.03.28-.05.42-.09.87-.24,1.7-.59,2.5-1.03.08-.04.17-.06.25-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.06,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.57-1.06-.19-.06-.37-.11-.56-.16-.88-.21-1.76-.34-2.65-.34-.13,0-.26.02-.4.02-.84.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.24.1.8.44,1.64.79,2.5,1.03.14.04.28.06.42.09.81.19,1.62.3,2.45.32.1,0,.19.04.29.04.04,0,.08-.02.13-.02.89,0,1.77-.13,2.65-.35.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.58-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-.08-.04-.16-.06-.24-.1-.8-.44-1.64-.8-2.51-1.04-.13-.04-.26-.05-.39-.09-.82-.2-1.65-.31-2.49-.33-.13,0-.25-.02-.38-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.75.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.07,5.68-31.9,0-9.84-5.68-15.95-16.27-15.95-27.63s6.11-21.95,15.95-27.63Z"></path><path style="fill:#3969ca" d="M141.09,317.65l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c.08-.04.13-.11.2-.16.78-.48,1.51-1.02,2.15-1.66.1-.1.18-.21.28-.31.57-.6,1.08-1.26,1.51-1.97.07-.12.15-.22.22-.34.44-.77.77-1.6,1.03-2.47.05-.19.1-.37.14-.56.22-.89.37-1.81.37-2.76v-29.43c0-11.36,6.11-21.95,15.96-27.63s22.06-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.57,1.06.19.06.37.11.56.16.87.21,1.76.34,2.64.35.04,0,.09.02.13.02.1,0,.19-.04.29-.04.83-.02,1.65-.13,2.45-.32.14-.03.28-.05.41-.09.87-.24,1.71-.6,2.51-1.04.08-.04.16-.06.24-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.07,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.58-1.06-.19-.06-.37-.11-.55-.16-.88-.21-1.76-.34-2.65-.35-.13,0-.26.02-.4.02-.83.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22Z"></path><path style="fill:#0294de" class="" d="M396.88,484.35l-50.97-29.43c-.08-.04-.17-.06-.24-.1-.8-.44-1.64-.79-2.51-1.03-.14-.04-.27-.06-.41-.09-.81-.19-1.64-.3-2.47-.32-.13,0-.26-.02-.39-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.76.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.06,5.68-31.9,0-9.84-5.68-15.96-16.27-15.96-27.63v-29.43c0-.95-.15-1.87-.37-2.76-.05-.19-.09-.37-.14-.56-.25-.86-.59-1.69-1.03-2.47-.07-.12-.15-.22-.22-.34-.43-.71-.94-1.37-1.51-1.97-.1-.1-.18-.21-.28-.31-.65-.63-1.37-1.18-2.15-1.66-.07-.04-.13-.11-.2-.16l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.25.1.8.44,1.63.79,2.5,1.03.14.04.29.06.43.09.8.19,1.61.3,2.43.32.1,0,.2.04.3.04.04,0,.09-.02.13-.02.88,0,1.77-.13,2.64-.34.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.57-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22Z"></path></svg><span class="text-sm font-medium text-white">Devin</span></div></a><button class="border-border bg-surface hover:border-border-hover hover:bg-component ml-auto flex cursor-pointer items-center gap-1.5 rounded-md border px-3 py-1.5 text-sm font-medium text-white transition-all" aria-label="Share"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg><span>Share</span></button><div class="h-8 w-8"></div></div></div></div></div><!--$--><div class="w-full flex-1"><div class="container-wrapper relative mx-auto h-full px-0"><div class="container relative mx-auto flex h-full w-full flex-col gap-0 max-md:!px-0 md:flex-row md:gap-6 lg:gap-10"><div class="border-r-border hidden max-h-screen border-r border-dashed py-7 pr-4 transition-[border-radius] md:sticky md:left-0 md:top-20 md:block md:h-[calc(100vh-82px)] md:w-64 md:flex-shrink-0 md:overflow-y-auto lg:py-9 xl:w-72"><div class="flex h-full w-full max-w-full flex-shrink-0 flex-col overflow-hidden" style="scrollbar-color:var(--color-border) transparent"><div class="flex-shrink-0 px-2"><div class="text-secondary pb-1 text-xs">Last indexed: <!-- -->11 May 2025<!-- --> (<a href="https://github.com/Mustafaibra/Iac-app/commits/104ebcb2" target="_blank" rel="noopener noreferrer">104ebc</a>)</div></div><ul class="flex-1 flex-shrink-0 space-y-1 overflow-y-auto py-1" style="scrollbar-width:none"><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/1-overview">Overview</a></li><li style="padding-left:0"><a data-selected="true" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/2-cicd-pipeline">CI/CD Pipeline</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/2.1-deployment-workflow">Deployment Workflow</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/2.2-quality-gate-system">Quality Gate System</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/2.3-dependency-management">Dependency Management</a></li><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/3-aws-infrastructure-architecture">AWS Infrastructure Architecture</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/3.1-provider-and-state-configuration">Provider and State Configuration</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/3.2-network-infrastructure">Network Infrastructure</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/3.3-api-gateway-and-lambda-integration">API Gateway and Lambda Integration</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/3.4-lambda-functions">Lambda Functions</a></li><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/4-environment-management">Environment Management</a></li><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/Mustafaibra/Iac-app/5-outputs-and-integration-points">Outputs and Integration Points</a></li></ul></div></div><div class="flex h-full flex-1 flex-col overflow-hidden"><div class="bg-main border-b-border sticky top-0 z-10 border-b border-dashed md:hidden"><div class="flex cursor-pointer items-center gap-2 p-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256" class="transition-transform"><path d="M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"></path></svg><span class="truncate text-base font-normal">Menu</span></div></div><div class="relative flex-1 overflow-y-auto px-3 pt-3 md:rounded-md md:px-0 md:pt-0 [&amp;_::selection]:bg-purple-500/40" style="scrollbar-color:var(--color-night) transparent"><div class="pb-30 mx-auto max-w-2xl md:pb-40 md:pt-6 lg:pt-8"><div class="prose prose-invert dark:prose-invert prose-headings:text-inherit prose-p:text-inherit max-w-none"><div><div class="prose-custom prose-custom-md prose-custom-gray !max-w-none text-neutral-300 [overflow-wrap:anywhere]"><h1 id="cicd-pipeline" class="group flex items-center" data-header="true">CI/CD Pipeline<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h1>
<details>
<summary>Relevant source files</summary>
<ul>
<li><a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/dependabot.yaml" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/dependabot.yaml</span></a></li>
<li><a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span></a></li>
<li><a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/script-reuse.yaml" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/script-reuse.yaml</span></a></li>
</ul>
</details>
<p>This document provides a comprehensive overview of the Continuous Integration and Continuous Deployment (CI/CD) pipeline implemented in the Iac-app repository. The pipeline automates the process of validating, planning, and deploying infrastructure as code to AWS environments. For specific details on the actual AWS infrastructure being deployed, see <a href="/Mustafaibra/Iac-app/3-aws-infrastructure-architecture" class="text-neutral-300 hover:text-neutral-200 hover:underline">AWS Infrastructure Architecture</a>.</p>
<h2 id="pipeline-overview" class="group flex items-center" data-header="true">Pipeline Overview<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The CI/CD pipeline is implemented using GitHub Actions and is designed to provide automated deployment of infrastructure with quality gate checks. The pipeline supports multiple deployment scenarios and environment configurations through a combination of triggers and parameters.</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></pre>
<p>Sources: <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L3-L22" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">3-22</span></a> <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L67-L74" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">67-74</span></a> <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L75-L93" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">75-93</span></a></p>
<h2 id="trigger-mechanisms" class="group flex items-center" data-header="true">Trigger Mechanisms<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The pipeline can be triggered in three different ways:</p>
<ol>
<li><strong>Manual Workflow Dispatch</strong>: Users can manually trigger the workflow with specific deployment options.</li>
<li><strong>Push to main Branch</strong>: Automatically triggered when code is pushed to the main branch.</li>
<li><strong>Pull Request Events</strong>: Triggered when a pull request is opened or reopened.</li>
</ol>
<h3 id="manual-workflow-dispatch-options" class="group flex items-center" data-header="true">Manual Workflow Dispatch Options<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p>When triggering the workflow manually, users can choose from the following options:</p>





















<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>Apply</td><td>Only applies the infrastructure changes</td></tr><tr><td>Destroy</td><td>Only destroys the infrastructure</td></tr><tr><td>Apply and Destroy</td><td>Applies the changes and then destroys them (useful for testing)</td></tr></tbody></table>
<p>The default selection is &quot;Apply&quot;.</p>
<p>Sources: <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L3-L14" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">3-14</span></a></p>
<h2 id="deployment-workflow" class="group flex items-center" data-header="true">Deployment Workflow<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The main deployment job performs a series of operations to validate and deploy the infrastructure:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></pre>
<p>Sources: <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L23-L93" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">23-93</span></a></p>
<h3 id="key-steps-in-the-workflow" class="group flex items-center" data-header="true">Key Steps in the Workflow<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<ol>
<li>
<p><strong>Environment Setup</strong>:</p>
<ul>
<li>Configures AWS credentials from GitHub secrets</li>
<li>Sets up Terraform on the runner</li>
<li>Uses caching to speed up subsequent runs by storing the <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">.terraform</code> directory</li>
</ul>
</li>
<li>
<p><strong>Terraform Initialization</strong>:</p>
<ul>
<li>Initializes Terraform with remote backend configuration</li>
<li>Only runs if cache is not available</li>
</ul>
</li>
<li>
<p><strong>Validation and Formatting</strong>:</p>
<ul>
<li>Runs <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">terraform fmt -check</code> to ensure code is properly formatted</li>
<li>Runs <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">terraform validate</code> to check for configuration errors</li>
<li>Captures the exit code to determine if quality gates passed</li>
</ul>
</li>
<li>
<p><strong>Workspace Selection</strong>:</p>
<ul>
<li>Selects the &quot;Prod&quot; workspace for deployments from the main branch</li>
<li>Selects the &quot;Dev&quot; workspace for all other deployments</li>
<li>Creates the workspace if it doesn&#x27;t exist</li>
</ul>
</li>
<li>
<p><strong>Infrastructure Deployment</strong>:</p>
<ul>
<li>Based on the selected action, either applies or destroys the infrastructure</li>
<li>Uses auto-approve to run non-interactively</li>
<li>Passes AWS credentials as variables to Terraform</li>
</ul>
</li>
</ol>
<p>Sources: <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L34-L93" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">34-93</span></a></p>
<h2 id="quality-gate-system" class="group flex items-center" data-header="true">Quality Gate System<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The quality gate system ensures that infrastructure code meets standards before deployment. This is particularly important for pull requests that target the main branch.</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></pre>
<p>The quality gate job:</p>
<ol>
<li>Only runs for branches other than main</li>
<li>Takes the result of the validation and formatting checks</li>
<li>Creates a commit status to indicate success or failure</li>
<li>Fails the workflow if quality gate checks fail</li>
</ol>
<p>Sources: <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L95-L103" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">95-103</span></a> <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/script-reuse.yaml#L1-L33" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/script-reuse.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-33</span></a></p>
<h3 id="quality-gate-implementation" class="group flex items-center" data-header="true">Quality Gate Implementation<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p>The quality gate is implemented as a reusable workflow that:</p>
<ol>
<li>Receives an input parameter with the test result</li>
<li>Interprets the exit code (0 = success)</li>
<li>Reports the status to the GitHub Status API</li>
<li>Throws an error if the quality gate failed, preventing further workflow execution</li>
</ol>
<p>This ensures that only properly formatted and validated Terraform code can be merged into the main branch.</p>
<p>Sources: <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/script-reuse.yaml#L10-L33" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/script-reuse.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">10-33</span></a></p>
<h2 id="dependency-management" class="group flex items-center" data-header="true">Dependency Management<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The repository uses GitHub&#x27;s Dependabot to automatically keep GitHub Actions dependencies up to date:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></pre>
<p>Dependabot is configured to:</p>
<ol>
<li>Check for GitHub Actions updates weekly</li>
<li>Open up to 10 pull requests at a time</li>
<li>Automatically request reviews for these updates</li>
</ol>
<p>This ensures that the CI/CD pipeline itself stays updated with the latest features and security patches.</p>
<p>Sources: <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/dependabot.yaml#L1-L7" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/dependabot.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-7</span></a></p>
<h2 id="environment-management" class="group flex items-center" data-header="true">Environment Management<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The pipeline uses Terraform workspaces to manage different environments:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></pre>
<p>This approach allows:</p>
<ol>
<li>Isolation between environments (development vs. production)</li>
<li>Same code base for all environments</li>
<li>Different state files for each environment</li>
<li>Ability to test changes in development before applying to production</li>
</ol>
<p>Sources: <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L75-L86" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">75-86</span></a></p>
<h2 id="security-considerations" class="group flex items-center" data-header="true">Security Considerations<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The pipeline implements several security features:</p>
<ol>
<li>
<p><strong>Secrets Management</strong>:</p>
<ul>
<li>AWS credentials are stored as GitHub secrets</li>
<li>Credentials are passed to Terraform as variables</li>
<li>Credentials are not logged or exposed in the workflow</li>
</ul>
</li>
<li>
<p><strong>Branch Protection</strong>:</p>
<ul>
<li>Quality gate ensures code quality before merging to main</li>
<li>Only code that passes validation can be merged into production</li>
</ul>
</li>
<li>
<p><strong>Limited Permissions</strong>:</p>
<ul>
<li>The quality gate job uses minimal permissions (only statuses and contents)</li>
<li>Follows the principle of least privilege</li>
</ul>
</li>
</ol>
<p>Sources: <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L28-L30" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">28-30</span></a> <a href="https://github.com/Mustafaibra/Iac-app/blob/104ebcb2/.github/workflows/deployment.yaml#L96-L99" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>.github/workflows/deployment.yaml</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">96-99</span></a></p>
<h2 id="conclusion" class="group flex items-center" data-header="true">Conclusion<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The CI/CD pipeline in this repository provides a robust system for deploying and managing infrastructure as code on AWS. It enforces quality standards, supports multiple environments, and provides flexibility for different deployment scenarios.</p>
<p>For more detailed information about specific aspects of the pipeline:</p>
<ul>
<li>For the deployment workflow steps, see <a href="/Mustafaibra/Iac-app/2.1-deployment-workflow" class="text-neutral-300 hover:text-neutral-200 hover:underline">Deployment Workflow</a></li>
<li>For more details on the quality gate system, see <a href="/Mustafaibra/Iac-app/2.2-quality-gate-system" class="text-neutral-300 hover:text-neutral-200 hover:underline">Quality Gate System</a></li>
<li>For information about dependency management, see <a href="/Mustafaibra/Iac-app/2.3-dependency-management" class="text-neutral-300 hover:text-neutral-200 hover:underline">Dependency Management</a></li>
</ul></div></div></div></div></div></div><div class="hidden overflow-hidden transition-[border-radius] xl:sticky xl:right-0 xl:top-20 xl:block xl:h-[calc(100vh-82px)] xl:w-64 xl:flex-shrink-0 2xl:w-72" style="scrollbar-width:none"><div class="flex max-h-full w-full flex-shrink-0 flex-col py-6 pt-0 text-sm lg:pb-4 lg:pt-8 xl:w-64 2xl:w-72" style="scrollbar-color:var(--color-night) transparent"><div><div class="mx-4 mb-3 rounded-md border border-neutral-200 bg-neutral-100 p-3 text-sm text-neutral-600 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-400"><p class="text-sm font-medium">Auto-refresh not enabled yet<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256" class="ml-1.5 inline-block cursor-help text-neutral-400 transition-colors hover:text-neutral-600 dark:text-neutral-500 dark:hover:text-neutral-400" data-state="closed"><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"></path></svg></p></div><div class="mx-4 mb-3 rounded-md border border-neutral-200 bg-neutral-100 p-3 text-sm text-neutral-600 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-400"><p class="text-sm font-medium">Try DeepWiki on your private codebase with<!-- --> <a href="/private-repo" class="text-pacific hover:underline">Devin</a></p></div></div><h3 class="px-4 pb-5 text-lg font-medium leading-none">On this page</h3><ul style="scrollbar-width:none" class="min-h-0 flex-1 space-y-3 overflow-y-auto p-4 pt-0"><li class=""><a href="#cicd-pipeline" class="hover:text-primary pr-1 transition-all text-primary font-medium">CI/CD Pipeline</a></li><li class="ml-3"><a href="#pipeline-overview" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Pipeline Overview</a></li><li class="ml-3"><a href="#trigger-mechanisms" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Trigger Mechanisms</a></li><li class="ml-6"><a href="#manual-workflow-dispatch-options" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Manual Workflow Dispatch Options</a></li><li class="ml-3"><a href="#deployment-workflow" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Deployment Workflow</a></li><li class="ml-6"><a href="#key-steps-in-the-workflow" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Key Steps in the Workflow</a></li><li class="ml-3"><a href="#quality-gate-system" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Quality Gate System</a></li><li class="ml-6"><a href="#quality-gate-implementation" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Quality Gate Implementation</a></li><li class="ml-3"><a href="#dependency-management" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Dependency Management</a></li><li class="ml-3"><a href="#environment-management" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Environment Management</a></li><li class="ml-3"><a href="#security-considerations" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Security Considerations</a></li><li class="ml-3"><a href="#conclusion" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Conclusion</a></li></ul></div></div><div class="pointer-events-none fixed bottom-2 left-2 right-2 mt-2 md:bottom-4 md:left-0 md:right-0"><div class="z-10 mx-auto max-w-3xl"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></div></div></div></div></div><!--/$--></div><script src="/_next/static/chunks/webpack-acbbbb548492d4a6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[54276,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5009\",\"static/chunks/5009-cf1c1739f4eccbfa.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3377\",\"static/chunks/3377-d302682beb4206f6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"6671\",\"static/chunks/6671-b0da8a89e8d16b02.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"9853\",\"static/chunks/9853-ba5965ca136d44c2.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"7177\",\"static/chunks/app/layout-54da70140f7127e0.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\"],\"RootProvider\"]\n3:I[87555,[],\"\"]\n4:I[31295,[],\"\"]\n6:I[90894,[],\"ClientPageRoot\"]\n7:I[87667,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2545\",\"static/chunks/c16f53c3-c80d3b6d0c4af7a0.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"537\",\"static/chunks/537-d9d5e9261de3e69c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5009\",\"static/chunks/5009-cf1c1739f4eccbfa.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2136\",\"static/chunks/2136-0f8d797058c844d4.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3377\",\"static/chunks/3377-d302682beb4206f6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"6671\",\"static/chunks/6671-b0da8a89e8d16b02.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"9970\",\"static/chunks/9970-05da82a5b9af6015.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1235\",\"static/chunks/1235-2bb070afbba964c5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4889\",\"static/chunks/4889-88dda955466eba30.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"168\",\"static/chunks/168-d8e567d7acd9a9f8.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"9853\",\"static/chunks/9853-ba5965ca136d44c2.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2193\",\"static/chunks/2"])</script><script>self.__next_f.push([1,"193-bd88dde7e3a2e1a4.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"8335\",\"static/chunks/8335-cd2a11b5dbfe138d.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3285\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/%5B%5B...wikiRoutes%5D%5D/page-dfd2d90d0481fb54.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\"],\"default\"]\na:I[59665,[],\"OutletBoundary\"]\nd:I[59665,[],\"ViewportBoundary\"]\nf:I[59665,[],\"MetadataBoundary\"]\n11:I[26614,[],\"\"]\n:HL[\"/_next/static/media/569ce4b8f30dc480-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/f30152c0704fba31.css?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"style\"]\n:HL[\"/_next/static/css/d162e991e7f49167.css?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"4OK_GYCBLB5CelA8Qa6VZ\",\"p\":\"\",\"c\":[\"\",\"Mustafaibra\",\"Iac-app\",\"2-cicd-pipeline\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"org\",\"Mustafaibra\",\"d\"],{\"children\":[[\"repo\",\"Iac-app\",\"d\"],{\"children\":[[\"wikiRoutes\",\"2-cicd-pipeline\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f30152c0704fba31.css?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d162e991e7f49167.css?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{}],[\"$\",\"body\",null,{\"className\":\"__variable_5cfdac font-geist-sans relative min-h-screen __variable_9a8899 bg-background antialiased\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}]]}],{\"children\":[[\"org\",\"Mustafaibra\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"repo\",\"Iac-app\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,\"$L5\"]}],{\"children\":[[\"wikiRoutes\",\"2-cicd-pipeline\",\"oc\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L6\",null,{\"Component\":\"$7\",\"searchParams\":{},\"params\":{\"org\":\"Mustafaibra\",\"repo\":\"Iac-app\",\"wikiRoutes\":[\"2-cicd-pipeline\"]},\"promises\":[\"$@8\",\"$@9\"]}],\"$undefined\",null,[\"$\",\"$La\",null,{\"children\":[\"$Lb\",\"$Lc\",null]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"YP3IOEE5xFKNNcBgk29aR\",{\"children\":[[\"$\",\"$Ld\",null,{\"children\":\"$Le\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"12:I[93691,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4129\",\"static/chunks/7bf36345-20a79815585d2583.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"537\",\"static/chunks/537-d9d5e9261de3e69c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5009\",\"static/chunks/5009-cf1c1739f4eccbfa.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2136\",\"static/chunks/2136-0f8d797058c844d4.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3377\",\"static/chunks/3377-d302682beb4206f6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"6671\",\"static/chunks/6671-b0da8a89e8d16b02.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"9970\",\"static/chunks/9970-05da82a5b9af6015.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1235\",\"static/chunks/1235-2bb070afbba964c5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4889\",\"static/chunks/4889-88dda955466eba30.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"7646\",\"static/chunks/7646-a48026d39d9219b5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3449\",\"static/chunks/3449-34296dd8d39c9ba6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4393\",\"static/chunks/4393-60e403da10f49831.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5805\",\"static/chunks/5805-44d30e670d12436d.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2933\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-f6177459e9003494.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\"],\"CodebaseWikiHeader\"]\n13:I[6874,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4129\",\"static/chunks/7bf36345-20a79815585d2583.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"537\",\"static/chunks/537-d9d5e9261de3e69c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5009\",\"static/chunks/5009-cf1c1739f4eccbfa.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkY"])</script><script>self.__next_f.push([1,"MSGDN3\",\"2136\",\"static/chunks/2136-0f8d797058c844d4.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3377\",\"static/chunks/3377-d302682beb4206f6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"6671\",\"static/chunks/6671-b0da8a89e8d16b02.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"9970\",\"static/chunks/9970-05da82a5b9af6015.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1235\",\"static/chunks/1235-2bb070afbba964c5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4889\",\"static/chunks/4889-88dda955466eba30.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"7646\",\"static/chunks/7646-a48026d39d9219b5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3449\",\"static/chunks/3449-34296dd8d39c9ba6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4393\",\"static/chunks/4393-60e403da10f49831.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5805\",\"static/chunks/5805-44d30e670d12436d.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2933\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-f6177459e9003494.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\"],\"\"]\n14:\"$Sreact.suspense\"\n15:I[67807,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4129\",\"static/chunks/7bf36345-20a79815585d2583.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"537\",\"static/chunks/537-d9d5e9261de3e69c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5009\",\"static/chunks/5009-cf1c1739f4eccbfa.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2136\",\"static/chunks/2136-0f8d797058c844d4.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3377\",\"static/chunks/3377-d302682beb4206f6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"6671\",\"static/chunks/6671-b0da8a89e8d16b02.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"9970\",\"static/chunks/9970-05da82a5b9af6015.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1235\",\"static/chunks/1235-2bb070afbba964c5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4889\",\"static/chunks/4889-88dda955466eba30.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"7646"])</script><script>self.__next_f.push([1,"\",\"static/chunks/7646-a48026d39d9219b5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3449\",\"static/chunks/3449-34296dd8d39c9ba6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4393\",\"static/chunks/4393-60e403da10f49831.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5805\",\"static/chunks/5805-44d30e670d12436d.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2933\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-f6177459e9003494.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\"],\"ShinyText\"]\n8:{}\n9:{\"org\":\"Mustafaibra\",\"repo\":\"Iac-app\",\"wikiRoutes\":\"$0:f:0:1:2:children:2:children:2:children:2:children:1:props:children:0:props:params:wikiRoutes\"}\n5:[\"$\",\"div\",null,{\"className\":\"flex min-h-screen w-full flex-col text-white\",\"id\":\"codebase-wiki-repo-page\",\"children\":[[\"$\",\"$L12\",null,{\"hideOnSm\":true,\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-1\",\"children\":[[\"$\",\"$L13\",null,{\"href\":\"/\",\"className\":\"block text-xs font-medium leading-none text-white sm:hidden md:text-lg\",\"children\":\"DeepWiki\"}],[\"$\",\"p\",null,{\"className\":\"text-text-secondary text-sm font-normal leading-none md:text-lg\",\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/Mustafaibra/Iac-app\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"text-[#8f8f8f] transition-colors hover:text-black dark:hover:text-white\",\"children\":\"Mustafaibra/Iac-app\"}]}]]}]}],[\"$\",\"$14\",null,{\"fallback\":[\"$\",\"div\",null,{\"className\":\"container-wrapper flex flex-1 items-center justify-center px-4\",\"children\":[\"$\",\"$L15\",null,{\"className\":\"text-center text-lg\",\"text\":\"Loading Mustafaibra/Iac-app...\",\"speed\":1}]}],\"children\":\"$L16\"}]]}]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nb:null\n"])</script><script>self.__next_f.push([1,"17:I[60168,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4129\",\"static/chunks/7bf36345-20a79815585d2583.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"537\",\"static/chunks/537-d9d5e9261de3e69c.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5009\",\"static/chunks/5009-cf1c1739f4eccbfa.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2136\",\"static/chunks/2136-0f8d797058c844d4.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3377\",\"static/chunks/3377-d302682beb4206f6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"6671\",\"static/chunks/6671-b0da8a89e8d16b02.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"9970\",\"static/chunks/9970-05da82a5b9af6015.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"1235\",\"static/chunks/1235-2bb070afbba964c5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4889\",\"static/chunks/4889-88dda955466eba30.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"7646\",\"static/chunks/7646-a48026d39d9219b5.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"3449\",\"static/chunks/3449-34296dd8d39c9ba6.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"4393\",\"static/chunks/4393-60e403da10f49831.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"5805\",\"static/chunks/5805-44d30e670d12436d.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\",\"2933\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-f6177459e9003494.js?dpl=dpl_9YgLbzZSV9Zzw7HzcsGmkYMSGDN3\"],\"WikiLayout\"]\n18:T1f3e,"])</script><script>self.__next_f.push([1,"# Overview\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.github/workflows/deployment.yaml](.github/workflows/deployment.yaml)\n- [README.md](README.md)\n- [main.tf](main.tf)\n- [providers.tf](providers.tf)\n\n\u003c/details\u003e\n\n\n\nThis document provides an introduction to the Iac-app repository, a comprehensive Infrastructure as Code (IaC) solution for deploying and managing AWS resources using Terraform. The repository implements DevOps best practices with automated CI/CD pipelines, quality gates, and environment management.\n\nFor detailed information about the CI/CD pipeline implementation, see [CI/CD Pipeline](#2).\n\n## Repository Purpose\n\nThe Iac-app repository serves as a complete Infrastructure as Code solution that:\n\n1. Defines AWS infrastructure resources using Terraform\n2. Implements automated deployment via GitHub Actions\n3. Supports multiple environments through Terraform workspaces\n4. Deploys serverless applications using Lambda functions exposed via API Gateway and Application Load Balancer\n\nSources: [.github/workflows/deployment.yaml:1-23](), [providers.tf:1-16]()\n\n## System Architecture\n\n### High-Level Architecture\n\n```mermaid\nflowchart TD\n    subgraph \"Iac-app Repository\"\n        direction LR\n        subgraph \"Infrastructure Definition\"\n            TF[\"Terraform Configuration\"]\n            MOD[\"API Gateway Modules\"]\n        end\n        \n        subgraph \"CI/CD Pipeline\"\n            GHA[\"GitHub Actions\"]\n            QG[\"Quality Gate\"]\n        end\n        \n        subgraph \"Application Code\"\n            LAMBDA[\"Lambda Functions\"]\n        end\n    end\n    \n    subgraph \"AWS Cloud\" \n        S3[\"S3 Backend\\nmustafa-tf-state2025\"]\n        \n        subgraph \"AWS Resources\"\n            VPC[\"VPC: mian-Vpc\"]\n            ALB[\"Application Load Balancer: main-lb\"]\n            APIGW[\"API Gateway\"]\n            LAMBDA_FN[\"Lambda: saying-hello\"]\n            IAM[\"IAM Roles\"]\n        end\n    end\n    \n    TF --\u003e|\"defines\"| AWS_RES[\"AWS Resources\"]\n    MOD --\u003e|\"configures\"| APIGW\n    GHA --\u003e|\"executes\"| TF\n    QG --\u003e|\"validates\"| TF\n    LAMBDA --\u003e|\"packaged as\"| LAMBDA_FN\n    TF --\u003e|\"stores state\"| S3\n    \n    classDef default fill:white,stroke:#333,stroke-width:1px;\n```\n\nSources: [.github/workflows/deployment.yaml:23-93](), [providers.tf:1-21](), [main.tf:3-261]()\n\n### Deployment Workflow\n\n```mermaid\nsequenceDiagram\n    participant DEV as \"Developer\"\n    participant GH as \"GitHub Repository\"\n    participant GHWF as \"GitHub Actions Workflow\"\n    participant TF as \"Terraform\"\n    participant AWS as \"AWS Cloud\"\n    \n    DEV-\u003e\u003eGH: Push code / Create PR\n    GH-\u003e\u003eGHWF: Trigger deployment.yaml\n    GHWF-\u003e\u003eGHWF: Checkout code\n    GHWF-\u003e\u003eGHWF: Setup Terraform\n    GHWF-\u003e\u003eGHWF: Cache .terraform modules\n    GHWF-\u003e\u003eTF: terraform init\n    GHWF-\u003e\u003eTF: terraform fmt -check\n    GHWF-\u003e\u003eTF: terraform validate\n    Note over GHWF: Quality Gate Check\n    \n    alt main branch\n        GHWF-\u003e\u003eTF: Select/create Prod workspace\n    else other branch\n        GHWF-\u003e\u003eTF: Select/create Dev workspace\n    end\n    \n    alt Apply or Apply and Destroy selected\n        GHWF-\u003e\u003eTF: terraform apply\n        TF-\u003e\u003eAWS: Create/Update Resources\n    end\n    \n    alt Destroy or Apply and Destroy selected\n        GHWF-\u003e\u003eTF: terraform destroy\n        TF-\u003e\u003eAWS: Remove Resources\n    end\n```\n\nSources: [.github/workflows/deployment.yaml:24-93]()\n\n## Key Components\n\n### 1. CI/CD Pipeline\n\nThe repository employs GitHub Actions for continuous integration and deployment with the following features:\n\n- **Automated Deployment**: Triggered by pushes to main, pull requests, or manual invocation\n- **Quality Gate Checks**: Performs Terraform validation and formatting checks\n- **Environment Management**: Automatically selects appropriate Terraform workspace based on branch\n- **Action Options**: Supports Apply, Destroy, or Apply and Destroy actions\n\nSources: [.github/workflows/deployment.yaml:3-22](), [.github/workflows/deployment.yaml:67-93]()\n\n### 2. AWS Infrastructure Architecture\n\nThe infrastructure defined in this repository consists of:\n\n| Component | Purpose | Implementation |\n|-----------|---------|----------------|\n| Networking | Provides network isolation and connectivity | VPC, Public Subnets, Security Groups |\n| Compute | Hosts application logic | Lambda Function (`saying-hello`) |\n| API Endpoints | Exposes application to clients | API Gateway, VPC Link, Application Load Balancer |\n| Security | Manages access permissions | IAM Roles and Policies |\n| State Management | Stores Terraform state | S3 Backend (`mustafa-tf-state2025`) |\n\nSources: [providers.tf:9-15](), [main.tf:3-154]()\n\n### 3. Terraform Configuration\n\n```mermaid\ngraph TD\n    subgraph \"Core Infrastructure Files\"\n        PROV[\"providers.tf\"]\n        MAIN[\"main.tf\"]\n        NETW[\"network-conf.tf\"]\n    end\n    \n    subgraph \"Modules\"\n        APIGW2[\"api-gatway2 module\"]\n    end\n    \n    subgraph \"Application Code\"\n        INDEX[\"index.mjs\"]\n        ZIP[\"lambda_function_payload.zip\"]\n    end\n    \n    PROV --\u003e|\"configures AWS provider\"| AWS\n    PROV --\u003e|\"sets up S3 backend\"| S3[(S3 State Storage)]\n    MAIN --\u003e|\"defines\"| LB[\"aws_lb: main-lb\"]\n    MAIN --\u003e|\"defines\"| LAMBDA[\"aws_lambda_function: saying-hello\"]\n    MAIN --\u003e|\"uses\"| APIGW2\n    INDEX --\u003e|\"archived into\"| ZIP\n    ZIP --\u003e|\"deployed as\"| LAMBDA\n```\n\nThe Terraform configuration is organized as:\n\n- **Provider Configuration**: AWS provider and S3 backend setup in `providers.tf`\n- **Infrastructure Resources**: Load balancer, Lambda function, and IAM roles in `main.tf`\n- **Network Configuration**: VPC, subnets, and routing in `network-conf.tf` (referenced in code)\n- **Modular Design**: API Gateway resources organized in modules\n\nSources: [providers.tf:1-21](), [main.tf:3-261]()\n\n## Lambda Function Integration\n\nThe repository includes a serverless application architecture where:\n\n1. A Lambda function (`saying-hello`) is defined in `main.tf`\n2. The function source code is located in `index.mjs`\n3. It's packaged into a ZIP file for deployment\n4. An Application Load Balancer routes traffic to the Lambda function\n5. An API Gateway exposes the Lambda via the load balancer\n\n```mermaid\nflowchart TD\n    subgraph \"Client Request Flow\"\n        CLIENT[\"Client\"]\n        APIGW[\"API Gateway\"]\n        VPC_LINK[\"VPC Link\"]\n        ALB[\"Application Load Balancer\\nmain-lb\"]\n        LAMBDA[\"Lambda Function\\nsaying-hello\"]\n    end\n    \n    CLIENT --\u003e|\"HTTP Request\"| APIGW\n    APIGW --\u003e|\"Routes via\"| VPC_LINK\n    VPC_LINK --\u003e|\"Forwards to\"| ALB\n    ALB --\u003e|\"Invokes\"| LAMBDA\n    LAMBDA --\u003e|\"Returns response\"| ALB\n    ALB --\u003e|\"Returns via\"| VPC_LINK\n    ALB --\u003e|\"Returns to\"| APIGW\n    APIGW --\u003e|\"HTTP Response\"| CLIENT\n```\n\nSources: [main.tf:73-89](), [main.tf:3-48](), [main.tf:93-105]()\n\n## Environment Management\n\nThe repository supports multiple deployment environments through Terraform workspaces:\n\n- **Production Environment**: Automatically uses `Prod` workspace for deployments from the main branch\n- **Development Environment**: Uses `Dev` workspace for all other branches and pull requests\n\nThis separation allows for testing infrastructure changes in isolation before promoting to production.\n\nSources: [.github/workflows/deployment.yaml:75-86]()\n\n## Getting Started\n\nTo work with this repository:\n\n1. **Clone the repository**: `git clone https://github.com/Mustafaibra/Iac-app.git`\n2. **Required credentials**: AWS access key and secret key are needed for deployment\n3. **Local development**: Make changes and create a pull request to trigger the Dev environment deployment\n4. **Production deployment**: Merge to main branch to trigger deployment to production\n\nFor detailed information about:\n- CI/CD Pipeline configuration, see [CI/CD Pipeline](#2)\n- AWS Infrastructure Architecture, see [AWS Infrastructure Architecture](#3)\n- Environment Management, see [Environment Management](#4)\n\nSources: [.github/workflows/deployment.yaml:28-30](), [providers.tf:17-21]()"])</script><script>self.__next_f.push([1,"19:T26a7,"])</script><script>self.__next_f.push([1,"# CI/CD Pipeline\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.github/dependabot.yaml](.github/dependabot.yaml)\n- [.github/workflows/deployment.yaml](.github/workflows/deployment.yaml)\n- [.github/workflows/script-reuse.yaml](.github/workflows/script-reuse.yaml)\n\n\u003c/details\u003e\n\n\n\nThis document provides a comprehensive overview of the Continuous Integration and Continuous Deployment (CI/CD) pipeline implemented in the Iac-app repository. The pipeline automates the process of validating, planning, and deploying infrastructure as code to AWS environments. For specific details on the actual AWS infrastructure being deployed, see [AWS Infrastructure Architecture](#3).\n\n## Pipeline Overview\n\nThe CI/CD pipeline is implemented using GitHub Actions and is designed to provide automated deployment of infrastructure with quality gate checks. The pipeline supports multiple deployment scenarios and environment configurations through a combination of triggers and parameters.\n\n```mermaid\nflowchart TD\n    subgraph \"Trigger Events\"\n        PR[\"Pull Request\\n(opened/reopened)\"]\n        Push[\"Push to main\"]\n        Manual[\"Manual Workflow\\nDispatch\"]\n    end\n\n    subgraph \"GitHub Actions Workflow\"\n        Deploy[\"Deployment Job\"]\n        QG[\"Quality Gate Job\"]\n    end\n\n    subgraph \"Terraform Operations\"\n        Init[\"terraform init\"]\n        Validate[\"terraform validate\"]\n        Format[\"terraform fmt -check\"]\n        Apply[\"terraform apply\"]\n        Destroy[\"terraform destroy\"]\n    end\n\n    subgraph \"Environments\"\n        Dev[\"Dev Workspace\"]\n        Prod[\"Prod Workspace\"]\n    end\n\n    PR --\u003e Deploy\n    Push --\u003e Deploy\n    Manual --\u003e Deploy\n\n    Deploy --\u003e Init\n    Init --\u003e Validate\n    Init --\u003e Format\n    Validate --\u003e |Output status| QG\n    Format --\u003e |Output status| QG\n    \n    Deploy --\u003e |\"Branch = main\"| Prod\n    Deploy --\u003e |\"Branch ≠ main\"| Dev\n    \n    Prod --\u003e Apply\n    Prod --\u003e Destroy\n    Dev --\u003e Apply\n    Dev --\u003e Destroy\n    \n    QG --\u003e |\"Status: success/failure\"| GitHub[\"GitHub Status API\"]\n```\n\nSources: [.github/workflows/deployment.yaml:3-22](), [.github/workflows/deployment.yaml:67-74](), [.github/workflows/deployment.yaml:75-93]()\n\n## Trigger Mechanisms\n\nThe pipeline can be triggered in three different ways:\n\n1. **Manual Workflow Dispatch**: Users can manually trigger the workflow with specific deployment options.\n2. **Push to main Branch**: Automatically triggered when code is pushed to the main branch.\n3. **Pull Request Events**: Triggered when a pull request is opened or reopened.\n\n### Manual Workflow Dispatch Options\n\nWhen triggering the workflow manually, users can choose from the following options:\n\n| Option | Description |\n|--------|-------------|\n| Apply | Only applies the infrastructure changes |\n| Destroy | Only destroys the infrastructure |\n| Apply and Destroy | Applies the changes and then destroys them (useful for testing) |\n\nThe default selection is \"Apply\".\n\nSources: [.github/workflows/deployment.yaml:3-14]()\n\n## Deployment Workflow\n\nThe main deployment job performs a series of operations to validate and deploy the infrastructure:\n\n```mermaid\nsequenceDiagram\n    participant GH as \"GitHub\"\n    participant Actions as \"GitHub Actions Runner\"\n    participant Cache as \"GitHub Actions Cache\"\n    participant AWS as \"AWS Environment\"\n    \n    GH-\u003e\u003eActions: Trigger workflow\n    Actions-\u003e\u003eActions: Checkout code\n    Actions-\u003e\u003eActions: Setup Terraform\n    \n    Actions-\u003e\u003eCache: Check for Terraform modules cache\n    alt Cache hit\n        Cache-\u003e\u003eActions: Provide cached .terraform\n    else Cache miss\n        Actions-\u003e\u003eActions: terraform init\n        Actions-\u003e\u003eCache: Save .terraform to cache\n    end\n    \n    Actions-\u003e\u003eActions: terraform fmt -check\n    Actions-\u003e\u003eActions: terraform validate\n    \n    alt Branch == main\n        Actions-\u003e\u003eActions: Select or create \"Prod\" workspace\n    else Other branch\n        Actions-\u003e\u003eActions: Select or create \"Dev\" workspace\n    end\n    \n    alt Apply or Apply and Destroy selected\n        Actions-\u003e\u003eAWS: terraform apply\n    end\n    \n    alt Destroy or Apply and Destroy selected\n        Actions-\u003e\u003eAWS: terraform destroy\n    end\n    \n    Actions-\u003e\u003eGH: Report job status\n```\n\nSources: [.github/workflows/deployment.yaml:23-93]()\n\n### Key Steps in the Workflow\n\n1. **Environment Setup**:\n   - Configures AWS credentials from GitHub secrets\n   - Sets up Terraform on the runner\n   - Uses caching to speed up subsequent runs by storing the `.terraform` directory\n\n2. **Terraform Initialization**:\n   - Initializes Terraform with remote backend configuration\n   - Only runs if cache is not available\n\n3. **Validation and Formatting**:\n   - Runs `terraform fmt -check` to ensure code is properly formatted\n   - Runs `terraform validate` to check for configuration errors\n   - Captures the exit code to determine if quality gates passed\n\n4. **Workspace Selection**:\n   - Selects the \"Prod\" workspace for deployments from the main branch\n   - Selects the \"Dev\" workspace for all other deployments\n   - Creates the workspace if it doesn't exist\n\n5. **Infrastructure Deployment**:\n   - Based on the selected action, either applies or destroys the infrastructure\n   - Uses auto-approve to run non-interactively\n   - Passes AWS credentials as variables to Terraform\n\nSources: [.github/workflows/deployment.yaml:34-93]()\n\n## Quality Gate System\n\nThe quality gate system ensures that infrastructure code meets standards before deployment. This is particularly important for pull requests that target the main branch.\n\n```mermaid\nflowchart TB\n    subgraph \"Deployment Job\"\n        Test[\"Run terraform fmt \u0026 validate\\nCapture exit code\"]\n        Output[\"Output test results\"]\n    end\n    \n    subgraph \"Quality Gate Job\"\n        Check[\"Check quality gate result\"]\n        Status[\"Create commit status\"]\n        Decision{\"Result == 0?\"}\n    end\n    \n    Test --\u003e Output\n    Output --\u003e Check\n    Check --\u003e Decision\n    Decision --\u003e|\"Yes\"| Success[\"Mark as success\\nAllow deployment\"]\n    Decision --\u003e|\"No\"| Failure[\"Mark as failure\\nFail workflow\"]\n    Success --\u003e Report[\"Report to GitHub Status API\"]\n    Failure --\u003e Report\n```\n\nThe quality gate job:\n1. Only runs for branches other than main\n2. Takes the result of the validation and formatting checks\n3. Creates a commit status to indicate success or failure\n4. Fails the workflow if quality gate checks fail\n\nSources: [.github/workflows/deployment.yaml:95-103](), [.github/workflows/script-reuse.yaml:1-33]()\n\n### Quality Gate Implementation\n\nThe quality gate is implemented as a reusable workflow that:\n1. Receives an input parameter with the test result\n2. Interprets the exit code (0 = success)\n3. Reports the status to the GitHub Status API\n4. Throws an error if the quality gate failed, preventing further workflow execution\n\nThis ensures that only properly formatted and validated Terraform code can be merged into the main branch.\n\nSources: [.github/workflows/script-reuse.yaml:10-33]()\n\n## Dependency Management\n\nThe repository uses GitHub's Dependabot to automatically keep GitHub Actions dependencies up to date:\n\n```mermaid\nflowchart LR\n    Dependabot[\"Dependabot Service\"] --\u003e|\"Weekly scan\"| Repository[\"Repository\"]\n    Repository --\u003e|\"Find outdated\\nGitHub Actions\"| Updates[\"Create update PRs\"]\n    Updates --\u003e|\"Up to 10 PRs\"| Review[\"Review \u0026 Merge\"]\n    Review --\u003e|\"Trigger\"| CI[\"CI/CD Pipeline\"]\n```\n\nDependabot is configured to:\n1. Check for GitHub Actions updates weekly\n2. Open up to 10 pull requests at a time\n3. Automatically request reviews for these updates\n\nThis ensures that the CI/CD pipeline itself stays updated with the latest features and security patches.\n\nSources: [.github/dependabot.yaml:1-7]()\n\n## Environment Management\n\nThe pipeline uses Terraform workspaces to manage different environments:\n\n```mermaid\nflowchart TD\n    Event{\"Trigger Event\"}\n    Event --\u003e|\"Push to main\"| ProdBranch[\"Main Branch Detected\"]\n    Event --\u003e|\"PR or other branch\"| DevBranch[\"Development Branch Detected\"]\n    \n    ProdBranch --\u003e ProdWS[\"terraform workspace select\\n-or-create Prod\"]\n    DevBranch --\u003e DevWS[\"terraform workspace select\\n-or-create Dev\"]\n    \n    ProdWS --\u003e ProdInfra[\"Production Infrastructure\\n(Prod workspace state)\"]\n    DevWS --\u003e DevInfra[\"Development Infrastructure\\n(Dev workspace state)\"]\n```\n\nThis approach allows:\n1. Isolation between environments (development vs. production)\n2. Same code base for all environments\n3. Different state files for each environment\n4. Ability to test changes in development before applying to production\n\nSources: [.github/workflows/deployment.yaml:75-86]()\n\n## Security Considerations\n\nThe pipeline implements several security features:\n\n1. **Secrets Management**:\n   - AWS credentials are stored as GitHub secrets\n   - Credentials are passed to Terraform as variables\n   - Credentials are not logged or exposed in the workflow\n\n2. **Branch Protection**:\n   - Quality gate ensures code quality before merging to main\n   - Only code that passes validation can be merged into production\n\n3. **Limited Permissions**:\n   - The quality gate job uses minimal permissions (only statuses and contents)\n   - Follows the principle of least privilege\n\nSources: [.github/workflows/deployment.yaml:28-30](), [.github/workflows/deployment.yaml:96-99]()\n\n## Conclusion\n\nThe CI/CD pipeline in this repository provides a robust system for deploying and managing infrastructure as code on AWS. It enforces quality standards, supports multiple environments, and provides flexibility for different deployment scenarios.\n\nFor more detailed information about specific aspects of the pipeline:\n- For the deployment workflow steps, see [Deployment Workflow](#2.1)\n- For more details on the quality gate system, see [Quality Gate System](#2.2)\n- For information about dependency management, see [Dependency Management](#2.3)"])</script><script>self.__next_f.push([1,"1a:T25c3,"])</script><script>self.__next_f.push([1,"# Deployment Workflow\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.github/workflows/deployment.yaml](.github/workflows/deployment.yaml)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document details the main deployment workflow for the Iac-app repository, which automatically manages Terraform operations across different environments. It explains how infrastructure changes are deployed to AWS using GitHub Actions, including the process of environment selection, validation, and execution of Terraform commands. For information about quality gate mechanisms used in the pipeline, see [Quality Gate System](#2.2).\n\n## Workflow Overview\n\nThe deployment workflow automates the process of applying infrastructure changes defined in Terraform configurations to AWS environments. It supports multiple triggers, workspace-based environment separation, and quality gate enforcement.\n\n```mermaid\nflowchart TD\n    subgraph \"Trigger Events\"\n        manual[\"Manual Trigger\n        (workflow_dispatch)\"]\n        push[\"Push to main\"]\n        pr[\"Pull Request\n        (opened/reopened)\"]\n    end\n\n    subgraph \"Deployment Job\"\n        checkout[\"Checkout Code\"]\n        setup[\"Set up Terraform\"]\n        cache[\"Cache .terraform\"]\n        init[\"Terraform Init\"]\n        validate[\"Validate \u0026 Format\"]\n        workspace[\"Select Workspace\n        (Prod or Dev)\"]\n        apply[\"Terraform Apply\n        (conditional)\"]\n        destroy[\"Terraform Destroy\n        (conditional)\"]\n    end\n\n    subgraph \"Quality Gate\"\n        qg[\"Check Quality Gate\n        (non-main branches)\"]\n    end\n\n    manual --\u003e checkout\n    push --\u003e checkout\n    pr --\u003e checkout\n    \n    checkout --\u003e setup\n    setup --\u003e cache\n    cache --\u003e |\"Cache miss\"| init\n    cache --\u003e |\"Cache hit\"| validate\n    init --\u003e validate\n    validate --\u003e workspace\n    workspace --\u003e apply\n    apply --\u003e |\"If destroy selected\"| destroy\n    \n    validate --\u003e |\"Output test results\"| qg\n```\n\n**Diagram: Deployment Workflow Overview**\n\nSources: [.github/workflows/deployment.yaml:3-22](), [.github/workflows/deployment.yaml:24-93](), [.github/workflows/deployment.yaml:95-103]()\n\n## Trigger Events\n\nThe deployment workflow can be initiated through three different events:\n\n1. **Manual Trigger (workflow_dispatch)**: Allows users to manually run the workflow with options to:\n   - Apply infrastructure changes\n   - Destroy infrastructure\n   - Apply and then destroy infrastructure (useful for testing)\n\n2. **Push to main branch**: Automatically triggered when changes are pushed to the main branch.\n\n3. **Pull Request**: Automatically triggered when a pull request is opened or reopened.\n\n| Trigger Type | Description | Options Available |\n|--------------|-------------|-------------------|\n| Manual | User-initiated via GitHub UI | Choose between Apply, Destroy, or Apply and Destroy |\n| Push | Automatic on push to main | No options (defaults to Apply) |\n| Pull Request | Automatic on PR opened/reopened | No options (defaults to Apply) |\n\nSources: [.github/workflows/deployment.yaml:3-22]()\n\n## Deployment Process\n\nThe deployment job follows a structured sequence of steps to manage infrastructure:\n\n```mermaid\nsequenceDiagram\n    participant GH as \"GitHub Runner\"\n    participant TF as \"Terraform\"\n    participant AWS as \"AWS Cloud\"\n    participant Cache as \"GitHub Actions Cache\"\n    \n    Note over GH: Job starts with AWS credentials\u003cbr\u003efrom GitHub Secrets\n    \n    GH-\u003e\u003eGH: Checkout code\n    GH-\u003e\u003eGH: Set up Terraform\n    \n    GH-\u003e\u003eCache: Try to restore\u003cbr\u003e.terraform cache\n    \n    alt Cache Miss\n        GH-\u003e\u003eTF: terraform init\n        GH-\u003e\u003eCache: Save .terraform cache\n    end\n    \n    GH-\u003e\u003eTF: terraform fmt -check\n    GH-\u003e\u003eTF: terraform validate\n    GH-\u003e\u003eGH: Store validation result\u003cbr\u003eas job output\n    \n    Note over GH: Select workspace based on\u003cbr\u003ebranch (Prod or Dev)\n    \n    alt Apply Selected\n        GH-\u003e\u003eTF: terraform apply -auto-approve\n        TF-\u003e\u003eAWS: Create/Update Resources\n    end\n    \n    alt Destroy Selected\n        GH-\u003e\u003eTF: terraform destroy -auto-approve\n        TF-\u003e\u003eAWS: Remove Resources\n    end\n```\n\n**Diagram: Deployment Process Flow**\n\nSources: [.github/workflows/deployment.yaml:24-93]()\n\n### Key Steps in the Deployment Process:\n\n1. **Environment Setup**:\n   - Checkout code from repository\n   - Set up Terraform using HashiCorp's setup-terraform action\n   - Configure AWS credentials from GitHub Secrets\n\n2. **Terraform Module Caching**:\n   - Cache `.terraform` directory and lock file to speed up subsequent runs\n   - Initialize Terraform only if cache miss occurs\n\n3. **Validation and Formatting**:\n   - Run `terraform fmt -check` to verify formatting\n   - Run `terraform validate` to validate configuration\n   - Store validation result as a job output for quality gate checks\n\n4. **Workspace Selection**:\n   - Select `Prod` workspace for main branch pushes\n   - Select `Dev` workspace for all other branches\n   - Create workspace if it doesn't exist\n\n5. **Infrastructure Operations**:\n   - Apply or destroy based on trigger type and selected option\n   - Operations run with `-auto-approve` to enable non-interactive execution\n\nSources: [.github/workflows/deployment.yaml:35-93]()\n\n## Environment Management\n\nThe workflow uses Terraform workspaces to manage different environments (Development and Production), providing isolation between infrastructure states.\n\n```mermaid\nflowchart TD\n    event[GitHub Event]\n    decision{\"Is main branch?\"}\n    prod[\"Select/Create \n    'Prod' Workspace\"]\n    dev[\"Select/Create \n    'Dev' Workspace\"]\n    \n    terraform[\"Run Terraform\n    operations in\n    selected workspace\"]\n    \n    event --\u003e decision\n    decision --\u003e|\"Yes (push to main)\"| prod\n    decision --\u003e|\"No (PR or other branch)\"| dev\n    prod --\u003e terraform\n    dev --\u003e terraform\n```\n\n**Diagram: Environment Selection Logic**\n\nThe workspace selection logic is implemented at [.github/workflows/deployment.yaml:75-86]():\n\n```\nif [[ \"${{ github.event_name }}\" == \"push\" \u0026\u0026 \"${{ github.ref }}\" == \"refs/heads/main\" ]]; then\n  echo \"Using Prod workspace\"\n  terraform workspace select -or-create Prod\nelse\n  echo \"Using Dev workspace\"\n  terraform workspace select -or-create Dev\nfi\n```\n\nThis approach ensures that:\n- Production infrastructure (main branch) uses the `Prod` workspace\n- Development and feature branches use the `Dev` workspace\n- Each workspace maintains its own separate state\n\nSources: [.github/workflows/deployment.yaml:75-86]()\n\n## Quality Gate Integration\n\nFor branches other than `main`, the workflow includes an additional quality gate check that runs after the deployment job.\n\nThe quality gate:\n- Uses a reusable workflow defined in `.github/workflows/script-reuse.yaml`\n- Receives the validation result from the deployment job\n- Creates a commit status to indicate success or failure\n- Fails the workflow if the quality gate doesn't pass\n\n```mermaid\nflowchart TD\n    deployment[\"Deployment Job\"]\n    output[\"validation_result\n    Output\"]\n    condition{\"Is main\n    branch?\"}\n    skip[\"Skip Quality Gate\"]\n    qg[\"Run Quality Gate Job\"]\n    reuse[\"Execute Reusable Workflow\n    script-reuse.yaml\"]\n    status[\"Set Commit Status\n    (success/failure)\"]\n    \n    deployment --\u003e output\n    output --\u003e condition\n    condition --\u003e|\"Yes\"| skip\n    condition --\u003e|\"No\"| qg\n    qg --\u003e reuse\n    reuse --\u003e status\n```\n\n**Diagram: Quality Gate Integration Flow**\n\nSources: [.github/workflows/deployment.yaml:95-103]()\n\n## Operation Modes\n\nThe workflow supports three operation modes when triggered manually:\n\n1. **Apply**: Only applies the Terraform configuration to create or update resources\n2. **Destroy**: Only destroys the infrastructure defined in the Terraform configuration\n3. **Apply and Destroy**: Applies the configuration and then destroys it (useful for testing)\n\n```mermaid\nflowchart TD\n    trigger[\"Manual Trigger\"]\n    choice{\"Selected\n    Option?\"}\n    \n    apply[\"terraform apply\n    -auto-approve\"]\n    destroy[\"terraform destroy\n    -auto-approve\"]\n    both[\"Apply then Destroy\"]\n    \n    trigger --\u003e choice\n    choice --\u003e|\"Apply\"| apply\n    choice --\u003e|\"Destroy\"| destroy\n    choice --\u003e|\"Apply and Destroy\"| both\n    both --\u003e apply\n    apply --\u003e |\"if Apply and Destroy\"| destroy\n```\n\n**Diagram: Operation Modes for Manual Triggers**\n\nThe conditional execution is controlled by the `github.event.inputs.choice` variable:\n\n```\n- name: Terraform Apply\n  if: github.event.inputs.choice == 'Apply and Destroy' || github.event.inputs.choice == 'Apply'\n  run: terraform apply -auto-approve [...]\n\n- name: Terraform Destroy\n  if: github.event.inputs.choice == 'Apply and Destroy' || github.event.inputs.choice == 'Destroy'\n  run: terraform destroy -auto-approve [...]\n```\n\nSources: [.github/workflows/deployment.yaml:4-14](), [.github/workflows/deployment.yaml:88-93]()\n\n## Best Practices and Considerations\n\n1. **Security**:\n   - AWS credentials are stored as GitHub Secrets and accessed via environment variables\n   - Sensitive variable values are not exposed in logs\n\n2. **Efficiency**:\n   - Module caching speeds up workflow execution\n   - `fail-fast: false` in the strategy ensures other jobs continue even if one fails\n\n3. **Automation**:\n   - `-auto-approve` flag enables non-interactive execution\n   - Workspace selection is automated based on branch name\n\n4. **Usage Guidelines**:\n   - Use manual triggers for controlled deployments or testing\n   - Pull requests trigger a deployment to the Dev environment for validation\n   - Merges to main automatically deploy to the Prod environment\n\nSources: [.github/workflows/deployment.yaml:26-31](), [.github/workflows/deployment.yaml:41-64]()"])</script><script>self.__next_f.push([1,"1b:T2324,"])</script><script>self.__next_f.push([1,"# Quality Gate System\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.github/workflows/script-reuse.yaml](.github/workflows/script-reuse.yaml)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Overview\n\nThe Quality Gate System is a critical component in the CI/CD pipeline that enforces code quality standards before allowing infrastructure changes to proceed. It evaluates the results of validation checks (such as Terraform validation) and acts as a control point that can either allow the pipeline to continue or fail it based on predefined criteria. For information about the broader CI/CD pipeline, see [CI/CD Pipeline](#2).\n\n## Architecture\n\nThe Quality Gate is implemented as a reusable GitHub Actions workflow that integrates with the main [Deployment Workflow](#2.1). It accepts a result code from quality checks, updates the commit status in GitHub, and controls pipeline flow.\n\n```mermaid\nflowchart TD\n    subgraph \"CI/CD Pipeline Flow\"\n        TFVal[\"terraform validate step\"] --\u003e|\"Exit Code\"| QG[\"script-reuse.yaml workflow\"]\n        QG --\u003e|\"inputs.Result == 0\"| TFPlan[\"terraform plan step\"]\n        QG --\u003e|\"inputs.Result != 0\"| Fail[\"Pipeline Failure\"]\n    end\n    \n    subgraph \"script-reuse.yaml Implementation\"\n        Input[\"inputs.Result parameter\"] --\u003e Evaluate[\"const passed = Result == 0\"]\n        Evaluate --\u003e UpdateStatus[\"github.rest.repos.createCommitStatus()\"]\n        Evaluate --\u003e|\"passed == true\"| Success[\"console.log('Quality gate check passed')\"]\n        Evaluate --\u003e|\"passed == false\"| Error[\"throw new Error('Quality gate check failed')\"]\n    end\n    \n    QG --\u003e Input\n```\n\nSources: [.github/workflows/script-reuse.yaml:1-33]()\n\n## Implementation Details\n\nThe Quality Gate workflow is designed to be called by other workflows and requires a `Result` input parameter that indicates whether quality checks have passed or failed.\n\n| Component | Description | Code Reference |\n|-----------|-------------|---------------|\n| Workflow Name | Identifies the workflow's purpose | [.github/workflows/script-reuse.yaml:1]() |\n| Trigger | How the workflow is invoked | [.github/workflows/script-reuse.yaml:2-3]() |\n| Input Parameter | The check result passed to the workflow | [.github/workflows/script-reuse.yaml:4-9]() |\n| Job | The execution unit that performs the check | [.github/workflows/script-reuse.yaml:10-12]() |\n| Debug Step | Echoes the input Result for debugging | [.github/workflows/script-reuse.yaml:14-15]() |\n| Quality Check | Core logic that evaluates the result | [.github/workflows/script-reuse.yaml:16-32]() |\n| Result Evaluation | Checks if Result equals 0 | [.github/workflows/script-reuse.yaml:20]() |\n| Commit Status Update | Sets success/failure status | [.github/workflows/script-reuse.yaml:21-28]() |\n| Error Handling | Throws error for failed checks | [.github/workflows/script-reuse.yaml:29-31]() |\n| Success Logging | Logs for passed checks | [.github/workflows/script-reuse.yaml:32]() |\n\n```mermaid\nclassDiagram\n    class \"script-reuse.yaml\" {\n        +name: \"this action checks for any quality gate resutlt and send signal\"\n        +on: workflow_call\n        +inputs.Result: string (required)\n        +jobs: Checking_Result\n    }\n    \n    class \"Checking_Result\" {\n        +runs-on: ubuntu-latest\n        +steps: [debug, Checking for quality gate]\n    }\n    \n    class \"Checking for quality gate\" {\n        +uses: actions/github-script@v6\n        +script: const passed = Result == 0\n        +script: github.rest.repos.createCommitStatus()\n        +script: if (!passed) throw new Error()\n        +script: console.log() and return passed\n    }\n    \n    \"script-reuse.yaml\" --\u003e \"Checking_Result\": defines\n    \"Checking_Result\" --\u003e \"Checking for quality gate\": includes\n```\n\nSources: [.github/workflows/script-reuse.yaml:1-33]()\n\n## Operational Flow\n\nThe Quality Gate operates through a specific sequence of steps that evaluate validation results and control pipeline execution:\n\n```mermaid\nsequenceDiagram\n    participant MW as \"Main Workflow\"\n    participant QG as \"script-reuse.yaml\"\n    participant GH as \"GitHub API\"\n    \n    MW-\u003e\u003eMW: Run quality check (e.g., terraform validate)\n    Note over MW: Capture exit code\n    MW-\u003e\u003eQG: Call with inputs.Result=exit_code\n    QG-\u003e\u003eQG: Echo Result (debug step)\n    QG-\u003e\u003eQG: const passed = Result == 0\n    QG-\u003e\u003eGH: github.rest.repos.createCommitStatus()\n    \n    alt passed == true\n        QG-\u003e\u003eQG: console.log(\"Quality gate check passed\")\n        QG-\u003e\u003eMW: Return success\n    else passed == false\n        QG-\u003e\u003eQG: throw new Error(\"Quality gate check failed\")\n        Note over QG,MW: Pipeline fails\n    end\n```\n\nSources: [.github/workflows/script-reuse.yaml:14-32]()\n\nThe operational steps include:\n\n1. **Quality Check Execution**: The main workflow runs a validation check (e.g., `terraform validate`)\n2. **Result Capture**: The exit code is captured (0 for success, non-zero for failure)\n3. **Quality Gate Invocation**: The main workflow calls the Quality Gate with the exit code\n4. **Debug Output**: The workflow echoes the Result value for debugging\n5. **Result Evaluation**: Checks if `Result` equals 0 using `const passed = Result == 0`\n6. **Status Update**: Updates the commit status using GitHub's API\n7. **Flow Control**: Logs success or throws an error based on the result\n\n## Integration with CI/CD Pipeline\n\nThe Quality Gate workflow is positioned between validation and planning stages in the deployment pipeline:\n\n```mermaid\nflowchart TD\n    PR[\"Pull Request\"] --\u003e Deploy[\"deployment.yaml workflow\"]\n    \n    subgraph \"deployment.yaml workflow\"\n        TFInit[\"terraform init step\"] --\u003e TFVal[\"terraform validate step\"]\n        TFVal --\u003e|\"Exit Code\"| QGCall[\"Call script-reuse.yaml workflow\"]\n        QGCall --\u003e|\"Result == 0\"| TFPlan[\"terraform plan step\"]\n        QGCall --\u003e|\"Result != 0\"| Fail[\"Pipeline Fails\"]\n        TFPlan --\u003e TFApply[\"terraform apply step\"]\n    end\n    \n    subgraph \"script-reuse.yaml workflow\"\n        Input[\"inputs.Result parameter\"] --\u003e Debug[\"debug step (echo Result)\"]\n        Debug --\u003e Check[\"Checking for quality gate step\"]\n        Check --\u003e Evaluate[\"const passed = Result == 0\"]\n        Evaluate --\u003e Status[\"github.rest.repos.createCommitStatus()\"]\n        Evaluate --\u003e Flow[\"if (!passed) throw Error\"]\n    end\n    \n    QGCall --\u003e Input\n```\n\nSources: [.github/workflows/script-reuse.yaml:1-33]()\n\nThe Quality Gate connects with other components in the CI/CD pipeline:\n\n| Related Component | Relationship to Quality Gate | Wiki Page |\n|-------------------|------------------------------|-----------|\n| Deployment Workflow | Calls the Quality Gate workflow | [Deployment Workflow](#2.1) |\n| Dependency Management | Protected by Quality Gate checks | [Dependency Management](#2.3) |\n| AWS Infrastructure | Validated through Quality Gate | [AWS Infrastructure Architecture](#3) |\n\n## Technical Implementation\n\nThe Quality Gate System's technical implementation involves several key aspects:\n\n1. **Reusable Workflow Pattern**: Uses GitHub Actions' `workflow_call` trigger to enable calling from other workflows\n   ```yaml\n   on:\n     workflow_call:\n       inputs:\n         Result:\n           required: true\n           type: string\n           default: 'false'\n           description: 'Result of the quality gate check'\n   ```\n\n2. **GitHub Script Action**: Uses `actions/github-script@v6` to interact with GitHub's API\n   ```yaml\n   - name: Checking for quality gate\n     uses: actions/github-script@v6\n     with:\n       script: |\n         # Script content here\n   ```\n\n3. **Result Evaluation Logic**: Simple check if Result equals 0\n   ```javascript\n   const passed = '${{ inputs.Result }}' == 0;\n   ```\n\n4. **Commit Status API Integration**: Updates the commit status for visual feedback\n   ```javascript\n   await github.rest.repos.createCommitStatus({\n     owner: context.repo.owner,\n     repo: context.repo.repo,\n     sha: context.sha,\n     state: passed ? 'success' : 'failure',\n     context: 'Quality Gate',\n     description: passed ? 'All checks passed' : 'Tests failed'\n   });\n   ```\n\n5. **Pipeline Control Mechanism**: Uses error throwing to fail the pipeline\n   ```javascript\n   if (!passed) {\n     throw new Error('Quality gate check failed');\n   }\n   ```\n\nSources: [.github/workflows/script-reuse.yaml:1-33]()\n\n## Summary\n\nThe Quality Gate System acts as a critical checkpoint in the CI/CD pipeline that enforces code quality standards by evaluating validation results. Implemented as a reusable GitHub Actions workflow, it provides both visual feedback through GitHub's commit status API and pipeline control by conditionally allowing or blocking subsequent deployment steps.\n\nBy preventing infrastructure code that fails quality checks from proceeding to deployment, the Quality Gate System helps maintain high code quality standards and reduces the risk of problematic infrastructure changes reaching production environments.\n\nSources: [.github/workflows/script-reuse.yaml:1-33]()"])</script><script>self.__next_f.push([1,"1c:T1641,"])</script><script>self.__next_f.push([1,"# Dependency Management\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.github/dependabot.yaml](.github/dependabot.yaml)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document describes how external dependencies are automatically managed and updated within the Iac-app repository. It focuses specifically on the management of GitHub Actions dependencies using Dependabot, GitHub's automated dependency update tool. For information about the overall CI/CD pipeline, see [CI/CD Pipeline](#2).\n\n## Overview\n\nDependency management is a critical aspect of maintaining secure and efficient infrastructure code. The Iac-app repository employs GitHub's Dependabot to automatically detect, update, and create pull requests for outdated GitHub Actions dependencies.\n\n```mermaid\nflowchart TD\n    subgraph \"Dependency Management System\"\n        dependabot[\"Dependabot\"]\n        config[\"dependabot.yaml\"]\n        actions[\"GitHub Actions Workflows\"]\n        prs[\"Pull Requests\"]\n    end\n\n    dependabot --\u003e|\"Reads\"| config\n    dependabot --\u003e|\"Scans\"| actions\n    dependabot --\u003e|\"Creates\"| prs\n    prs --\u003e|\"Updates when merged\"| actions\n```\n\nSources: [.github/dependabot.yaml:1-7]()\n\n## Dependabot Configuration\n\nThe repository uses a simple yet effective Dependabot configuration that focuses exclusively on GitHub Actions dependencies. The configuration is defined in the `.github/dependabot.yaml` file.\n\n### Configuration Details\n\n| Parameter | Value | Description |\n|-----------|-------|-------------|\n| Version | 2 | Dependabot configuration schema version |\n| Package Ecosystem | github-actions | Type of dependencies to monitor |\n| Directory | / | Location to scan for dependency files |\n| Update Schedule | Weekly | Frequency of update checks |\n| Open PR Limit | 10 | Maximum number of open pull requests at once |\n\nThis configuration ensures that GitHub Actions workflows in the repository stay up-to-date with the latest security patches and feature improvements without requiring manual intervention.\n\nSources: [.github/dependabot.yaml:1-7]()\n\n## Integration with CI/CD Pipeline\n\nDependabot plays a crucial role in the repository's overall CI/CD system by maintaining the tooling that powers the automation workflows.\n\n```mermaid\nsequenceDiagram\n    participant Dependabot\n    participant GitHub as GitHub Repository\n    participant CI as CI/CD Pipeline\n    \n    Note over Dependabot,GitHub: Weekly Scheduled Scan\n    Dependabot-\u003e\u003eGitHub: Scan workflow files for outdated actions\n    Dependabot-\u003e\u003eGitHub: Create pull request for updates\n    \n    Note over GitHub,CI: Pull Request Review Process\n    GitHub-\u003e\u003eCI: Trigger CI workflow on PR\n    CI-\u003e\u003eGitHub: Run tests with updated dependencies\n    \n    Note over GitHub: Human Review\n    GitHub-\u003e\u003eGitHub: Approve and merge PR\n    \n    Note over GitHub,CI: Integration\n    GitHub-\u003e\u003eCI: Updated dependencies used in subsequent workflows\n```\n\nSources: [.github/dependabot.yaml:1-7]()\n\n## Dependency Update Workflow\n\nThe dependency management process follows these key steps:\n\n1. **Detection**: Dependabot scans GitHub Actions workflow files weekly to identify outdated dependencies\n2. **Pull Request Creation**: For each outdated dependency, Dependabot creates a pull request with the appropriate updates\n3. **Validation**: The CI/CD pipeline automatically runs on these pull requests to ensure the updates don't break existing functionality\n4. **Review and Merge**: After validation, the pull requests can be reviewed and merged by repository maintainers\n5. **Implementation**: Once merged, all subsequent workflow runs will use the updated dependencies\n\n```mermaid\ngraph TD\n    subgraph \"GitHub Repository\"\n        workflow1[\"deployment.yaml\"]\n        workflow2[\"script-reuse.yaml\"]\n        depConfig[\"dependabot.yaml\"]\n    end\n    \n    subgraph \"Dependabot System\"\n        detector[\"Dependency Scanner\"]\n        updater[\"Update Generator\"]\n        prCreator[\"PR Creator\"]\n    end\n    \n    depConfig --\u003e|\"Configures\"| detector\n    detector --\u003e|\"Scans\"| workflow1\n    detector --\u003e|\"Scans\"| workflow2\n    detector --\u003e|\"Identifies outdated actions\"| updater\n    updater --\u003e|\"Generates updates\"| prCreator\n    prCreator --\u003e|\"Creates PRs\"| workflow1\n    prCreator --\u003e|\"Creates PRs\"| workflow2\n```\n\nSources: [.github/dependabot.yaml:1-7]()\n\n## Benefits and Limitations\n\n### Benefits\n\n- **Security**: Automatically applies security patches to GitHub Actions\n- **Stability**: Regular updates prevent accumulation of technical debt\n- **Reduced Maintenance**: Eliminates manual dependency tracking and updating\n- **Controlled Updates**: Weekly schedule and PR limit prevent overwhelming maintainers\n\n### Limitations\n\n- **Scope**: Current configuration only manages GitHub Actions dependencies, not application dependencies\n- **Manual Approval**: Pull requests still require manual review and approval\n- **Conflict Resolution**: Complex version conflicts may require manual intervention\n\n## Future Enhancements\n\nPotential improvements to the dependency management system could include:\n\n1. Expanding Dependabot configuration to monitor additional ecosystems (e.g., Terraform providers)\n2. Implementing automated approvals for minor version updates after successful tests\n3. Adding custom labels or notifications for security-critical updates\n\n## Conclusion\n\nThe dependency management system in the Iac-app repository provides an automated, controlled approach to keeping GitHub Actions dependencies up-to-date. By leveraging Dependabot, the repository ensures that its CI/CD workflows remain secure and efficient with minimal manual intervention.\n\nSources: [.github/dependabot.yaml:1-7]()"])</script><script>self.__next_f.push([1,"1d:T2025,"])</script><script>self.__next_f.push([1,"# AWS Infrastructure Architecture\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [main.tf](main.tf)\n- [network-conf.tf](network-conf.tf)\n- [providers.tf](providers.tf)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document provides an overview of the AWS infrastructure defined by the Terraform configurations in the Iac-app repository. It covers the main components, their relationships, and the overall architecture design. For detailed information about specific aspects:\n- For provider and state configuration details, see [Provider and State Configuration](#3.1)\n- For network components, see [Network Infrastructure](#3.2)\n- For API Gateway setup, see [API Gateway and Lambda Integration](#3.3)\n- For Lambda function details, see [Lambda Functions](#3.4)\n\n## Infrastructure Overview\n\nThe infrastructure follows a serverless architecture pattern with a VPC-based network that securely exposes Lambda functions through an Application Load Balancer (ALB) and API Gateway. The infrastructure is defined entirely as code using Terraform with AWS as the cloud provider.\n\n### High-Level Architecture Diagram\n\n```mermaid\nflowchart TD\n    subgraph \"Public Internet\"\n        client[\"Client\"]\n    end\n\n    subgraph \"API Layer\"\n        apigw[\"API Gateway v2\"]\n        vpclink[\"VPC Link\"]\n    end\n\n    subgraph \"VPC - mian-Vpc\"\n        subgraph \"Networking\"\n            ig[\"Internet Gateway\"]\n            nat[\"NAT Gateway\"]\n            rt[\"Route Table\"]\n            sg[\"Security Group\"]\n        end\n        \n        subgraph \"Public Subnet 1 - eu-north-1a\"\n            alb[\"Application Load Balancer\\n(main-lb)\"]\n        end\n        \n        subgraph \"Public Subnet 2 - eu-north-1b\"\n            ps2[\"Resources\"]\n        end\n        \n        subgraph \"Compute\"\n            lambda[\"Lambda Function\\n(saying-hello)\"]\n            tg[\"Target Group\\n(lambda-target-group)\"]\n        end\n    end\n\n    client --\u003e apigw\n    apigw --\u003e vpclink\n    vpclink --\u003e alb\n    alb --\u003e tg\n    tg --\u003e lambda\n```\n\nSources: [network-conf.tf:1-99](), [main.tf:3-16](), [main.tf:93-105]()\n\n## Core Infrastructure Components\n\nThe infrastructure consists of the following key components:\n\n| Component | Type | Purpose | Defined In |\n|-----------|------|---------|------------|\n| AWS Provider | Configuration | Connect to AWS services in eu-north-1 | providers.tf |\n| S3 Backend | State Storage | Remote Terraform state management | providers.tf |\n| VPC | Networking | Network isolation and security | network-conf.tf |\n| Subnets | Networking | Distribute resources across AZs | network-conf.tf |\n| ALB | Load Balancer | Route requests to Lambda functions | main.tf |\n| Lambda | Compute | Execute application code | main.tf |\n| API Gateway | API Layer | Expose APIs to clients | main.tf |\n| IAM Roles | Security | Service permissions | main.tf |\n\nSources: [providers.tf:1-22](), [network-conf.tf:1-99](), [main.tf:3-154]()\n\n## Network Architecture\n\nThe network infrastructure is built around a VPC with two public subnets distributed across availability zones. This design ensures high availability while providing secure access to AWS services.\n\n```mermaid\ngraph TD\n    vpc[\"VPC\\nmian-Vpc\\n10.0.0.0/16\"]\n    \n    ps1[\"Public Subnet 1\\n10.0.1.0/24\\neu-north-1a\"]\n    ps2[\"Public Subnet 2\\n10.0.2.0/24\\neu-north-1b\"]\n    \n    ig[\"Internet Gateway\\nig\"]\n    nat[\"NAT Gateway\\nmain-nat\"]\n    eip[\"Elastic IP\\nnat_gateway\"]\n    \n    rt[\"Route Table\\nrouting-table\"]\n    \n    sg[\"Security Group\\nsec_group\"]\n    \n    vpc --\u003e ps1\n    vpc --\u003e ps2\n    vpc --\u003e ig\n    ps1 --\u003e nat\n    eip --\u003e nat\n    ig --\u003e eip\n    \n    rt --\u003e ps1\n    rt --\u003e ps2\n    \n    vpc --\u003e sg\n    \n    nat --\u003e|\"Route 0.0.0.0/0\"| rt\n```\n\nSources: [network-conf.tf:1-72]()\n\n### Network Components\n\n- **VPC**: A dedicated virtual private cloud with CIDR block `10.0.0.0/16`\n- **Public Subnets**: Two subnets across different availability zones for high availability\n  - Public Subnet 1: `10.0.1.0/24` in `eu-north-1a`\n  - Public Subnet 2: `10.0.2.0/24` in `eu-north-1b`\n- **Internet Gateway**: Provides internet access to resources in the VPC\n- **NAT Gateway**: Allows private resources to access the internet without exposing them directly\n- **Route Tables**: Direct traffic between subnets and to the internet\n- **Security Group**: Controls inbound/outbound traffic to resources\n\nSources: [network-conf.tf:1-99]()\n\n### Security Group Configuration\n\nThe security group (`sec_group`) allows:\n- HTTP traffic (port 80)\n- HTTPS traffic (port 443)\n\nSSH access (port 22) is commented out in the configuration, indicating it's not currently enabled.\n\nSources: [network-conf.tf:73-99]()\n\n## Compute and Application Layer\n\nThe application is deployed as a Lambda function that is made accessible through an Application Load Balancer and API Gateway.\n\n```mermaid\ngraph TD\n    subgraph \"Application Flow\"\n        apigw2[\"API Gateway v2\\n(api-gatway2-module)\"]\n        vpclink[\"VPC Link\\n(vpclink-lb-gateway2)\"]\n        alb[\"Application Load Balancer\\n(main-lb)\"]\n        listener[\"ALB Listener\\n(main-listener)\"]\n        tg[\"Target Group\\n(lambda-target-group)\"]\n        lambda[\"Lambda Function\\n(saying-hello)\"]\n        role[\"IAM Role\\n(iam_for_lambda)\"]\n    end\n    \n    apigw2 --\u003e vpclink\n    vpclink --\u003e alb\n    alb --\u003e listener\n    listener --\u003e tg\n    tg --\u003e lambda\n    lambda --\u003e role\n```\n\nSources: [main.tf:3-89]()\n\n### Lambda Function\n\nThe Lambda function is configured with:\n- Function name: `saying-hello`\n- Runtime: `nodejs20.x`\n- Handler: `index.handler`\n- Source file: `index.mjs` (packaged into a ZIP file)\n- Ephemeral storage: 512 MB\n\nThe function is executed with permissions defined by the `iam_for_lambda` IAM role.\n\nSources: [main.tf:54-89]()\n\n### Application Load Balancer\n\nAn internal Application Load Balancer (`main-lb`) distributes traffic to the Lambda function:\n- Type: Application Load Balancer\n- Visibility: Internal\n- Connected to: Both public subnets\n- Security group: `sec_group`\n- Listener: HTTP on port 80\n- Target group: `lambda-target-group` (Lambda target type)\n\nThe ALB is configured with a target group attachment that connects it to the Lambda function.\n\nSources: [main.tf:3-40]()\n\n## API Layer Configuration\n\nThe infrastructure exposes the Lambda function to external clients through API Gateway v2 with VPC Link integration.\n\n### API Gateway Integration\n\nThe API Gateway v2 integration is configured using a module (`api-gatway2-module`) with:\n- VPC Link to connect to the private ALB\n- Connection to the ALB listener\n- IAM roles and policies for proper permissions\n\nNote: There is an older API Gateway v1 configuration commented out in the code, indicating a migration to API Gateway v2.\n\nSources: [main.tf:92-261]()\n\n### IAM Permissions\n\nSeveral IAM roles and policies are defined to enable service interactions:\n- Lambda execution role: Allows Lambda to be invoked and execute code\n- API Gateway role: Permits API Gateway to interact with the ALB\n- Lambda permission: Enables the ALB to invoke the Lambda function\n\nThe IAM policy for API Gateway specifically allows actions to manage load balancer listeners, rules, and targets.\n\nSources: [main.tf:42-154]()\n\n## State Management\n\nThe infrastructure state is managed using a remote backend stored in an S3 bucket. This approach enables:\n- Centralized state storage\n- State locking (via commented DynamoDB reference)\n- Team collaboration\n\nThe state is stored in:\n- Bucket: `mustafa-tf-state2025`\n- Key: `env/state/terraform.tfstate`\n- Region: `eu-north-1`\n\nSources: [providers.tf:1-16]()\n\n## Summary\n\nThe AWS infrastructure deploys a serverless application using Lambda functions, with a secure networking layer provided by VPC components. The application is accessible through an Application Load Balancer and API Gateway v2, providing multiple access methods while maintaining security and scalability.\n\nThe architecture follows AWS best practices by:\n1. Using multiple availability zones for high availability\n2. Implementing proper security controls with security groups\n3. Utilizing serverless compute with Lambda functions\n4. Providing secure API access through API Gateway and VPC Links\n5. Maintaining infrastructure as code with Terraform"])</script><script>self.__next_f.push([1,"1e:T17be,"])</script><script>self.__next_f.push([1,"# Provider and State Configuration\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [providers.tf](providers.tf)\n- [variables.tf](variables.tf)\n\n\u003c/details\u003e\n\n\n\nThis document details how AWS providers are configured in the Iac-app repository and how Terraform state is managed. It covers the configuration settings that establish connectivity with AWS services and the backend configuration that ensures proper state persistence.\n\nFor information about the network infrastructure built on top of this provider configuration, see [Network Infrastructure](#3.2). For details about environment management using these configurations, see [Environment Management](#4).\n\n## Provider Configuration Overview\n\nThe Iac-app repository uses the AWS provider to interact with AWS services. The provider configuration defines how Terraform authenticates with AWS and which region it operates in.\n\n```mermaid\nflowchart TD\n    subgraph \"Terraform Configuration\"\n        variables[\"variables.tf\\n(AWS Credentials)\"]\n        providers[\"providers.tf\\n(AWS Provider Config)\"]\n        tf[\"Terraform Operations\"]\n    end\n    \n    subgraph \"AWS Authentication\"\n        creds[\"Access Key \u0026 Secret Key\"]\n        region[\"Region: eu-north-1\"]\n    end\n    \n    variables --\u003e|\"var.aws_access_key\\nvar.aws_secret_key\"| providers\n    providers --\u003e|\"Authentication\"| creds\n    providers --\u003e|\"Region Selection\"| region\n    providers --\u003e|\"Configured Provider\"| tf\n    tf --\u003e|\"API Calls\"| aws[\"AWS Services\"]\n```\n\n**Diagram: AWS Provider Configuration Flow**\n\nSources: [providers.tf:17-21](), [variables.tf:1-9]()\n\n### Required Provider Specification\n\nThe AWS provider is explicitly required with version constraints to ensure compatibility:\n\n```mermaid\ngraph LR\n    subgraph \"providers.tf\"\n        req[\"required_providers\"]\n        aws[\"aws provider\\n(version ~\u003e 5.0)\"]\n    end\n    \n    req --\u003e|\"specifies\"| aws\n    aws --\u003e|\"source\"| hash[\"hashicorp/aws\"]\n```\n\n**Diagram: AWS Provider Version Specification**\n\nSources: [providers.tf:1-7]()\n\n### Provider Authentication\n\nThe repository uses variable-based authentication for the AWS provider:\n\n| Configuration Element | Value | Source |\n|----------------------|-------|--------|\n| Region | eu-north-1 | [providers.tf:18]() |\n| Authentication | Variable-based (access_key, secret_key) | [providers.tf:19-20]() |\n| Access Key Variable | aws_access_key | [variables.tf:1-4]() |\n| Secret Key Variable | aws_secret_key | [variables.tf:6-9]() |\n\nThese variables are expected to be supplied at runtime, typically through environment variables, command-line arguments, or a `.tfvars` file (not committed to the repository for security reasons).\n\nSources: [providers.tf:17-21](), [variables.tf:1-9]()\n\n## State Management Configuration\n\nTerraform state records the mapping between resources defined in configuration and real-world resources. The Iac-app repository uses a remote S3 backend to store this state.\n\n```mermaid\nflowchart LR\n    subgraph \"Local Environment\"\n        tf[\"Terraform CLI\"]\n        config[\"Terraform Configuration\"]\n    end\n    \n    subgraph \"AWS\"\n        s3[\"S3 Bucket\\nmustafa-tf-state2025\"]\n        subgraph \"Bucket Contents\"\n            state[\"env/state/terraform.tfstate\"]\n        end\n    end\n    \n    config --\u003e|\"References\"| backend[\"Backend Configuration\\nin providers.tf\"]\n    tf --\u003e|\"Read/Write State\"| s3\n    s3 --\u003e|\"Contains\"| state\n```\n\n**Diagram: Terraform State Management with S3**\n\nSources: [providers.tf:9-15]()\n\n### S3 Backend Configuration\n\nThe repository configures an S3 backend with the following parameters:\n\n| Parameter | Value | Purpose |\n|-----------|-------|---------|\n| bucket | mustafa-tf-state2025 | S3 bucket name that stores the state file |\n| key | env/state/terraform.tfstate | Path within the bucket where state is stored |\n| region | eu-north-1 | AWS region where the S3 bucket is located |\n\nThere is a commented-out reference to a DynamoDB table (`terraform-locks`) that could be used for state locking, but it's not currently active.\n\nSources: [providers.tf:9-15]()\n\n## Provider and State Relationship\n\nThe provider configuration and state management work together to create a reliable infrastructure deployment system:\n\n```mermaid\ngraph TD\n    subgraph \"Terraform Configuration Files\"\n        provider[\"providers.tf\"]\n        vars[\"variables.tf\"]\n        main[\"main.tf\"]\n        network[\"network-conf.tf\"]\n    end\n    \n    subgraph \"State Management\"\n        backend[\"S3 Backend\"]\n        tfstate[\"terraform.tfstate\"]\n    end\n    \n    subgraph \"AWS Authentication\"\n        creds[\"AWS Credentials\"]\n    end\n    \n    vars --\u003e|\"Provides variables\"| provider\n    provider --\u003e|\"Configures\"| aws[\"AWS Provider\"]\n    provider --\u003e|\"Configures\"| backend\n    \n    aws --\u003e|\"Authenticates with\"| creds\n    aws --\u003e|\"Creates/Updates\"| resources[\"AWS Resources\"]\n    \n    main --\u003e|\"Defines\"| resources\n    network --\u003e|\"Defines\"| resources\n    \n    backend --\u003e|\"Stores\"| tfstate\n    tfstate --\u003e|\"Tracks\"| resources\n```\n\n**Diagram: Provider and State Interconnection**\n\nSources: [providers.tf:1-21](), [variables.tf:1-9]()\n\n## Usage Considerations\n\nWhen working with this provider and state configuration, consider the following:\n\n1. **Secret Management**: AWS credentials must be securely provided and never committed to version control\n2. **State Access Control**: Ensure proper access controls on the S3 bucket containing Terraform state\n3. **State Locking**: Consider enabling the DynamoDB state locking mechanism to prevent concurrent state modifications\n4. **Workspace Awareness**: The state path may vary depending on the active Terraform workspace (see [Environment Management](#4))\n\n## Implementation Notes\n\n- The AWS provider is configured in the [providers.tf]() file\n- Authentication variables are defined in [variables.tf]()\n- The S3 bucket for state must exist before running Terraform\n- The repository uses the same region (eu-north-1) for both the AWS provider and the S3 backend\n\nSources: [providers.tf:1-21](), [variables.tf:1-9]()"])</script><script>self.__next_f.push([1,"1f:T1c69,"])</script><script>self.__next_f.push([1,"# Network Infrastructure\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [network-conf.tf](network-conf.tf)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document details the AWS network infrastructure defined in the Iac-app repository using Terraform. It covers the Virtual Private Cloud (VPC), subnets, gateways, routing tables, and security group configurations that form the foundation for the application's networking environment. For information about how this network infrastructure integrates with API Gateway and Lambda functions, see [API Gateway and Lambda Integration](#3.3).\n\n## Network Architecture Overview\n\nThe network infrastructure is designed around a single VPC with redundant public subnets spread across two availability zones in the EU North region (Stockholm). The architecture includes internet connectivity via Internet and NAT gateways with appropriate routing tables to manage traffic flow.\n\n```mermaid\nflowchart TD\n    subgraph \"AWS Region: eu-north-1\"\n        subgraph \"VPC: mian-Vpc\"\n            id1[\"VPC CIDR: 10.0.0.0/16\"]\n            \n            subgraph \"AZ: eu-north-1a\"\n                PS1[\"public-subnet-1\\n10.0.1.0/24\"]\n            end\n            \n            subgraph \"AZ: eu-north-1b\"\n                PS2[\"public-subnet-2\\n10.0.2.0/24\"]\n            end\n            \n            IG[\"Internet Gateway (ig)\"]\n            NAT[\"NAT Gateway (main-nat)\"]\n            EIP[\"Elastic IP\"]\n            RT[\"Route Table\\n(routing-table)\"]\n            SG[\"Security Group\\n(sec_group)\"]\n        end\n    end\n    \n    id1 --\u003e PS1\n    id1 --\u003e PS2\n    id1 --\u003e IG\n    id1 --\u003e SG\n    EIP --\u003e NAT\n    PS1 --\u003e NAT\n    RT --\u003e PS1\n    RT --\u003e PS2\n    NAT --\u003e RT\n    \n    Internet((Internet)) --\u003e IG\n    IG --\u003e VPC\n```\n\nSources: [network-conf.tf:1-50]()\n\n## VPC Configuration\n\nThe infrastructure is built on a single VPC named \"mian-Vpc\" with a CIDR block of 10.0.0.0/16. This provides a private network space with up to 65,536 IP addresses.\n\n```mermaid\ngraph TD\n    VPC[\"aws_vpc.mian-Vpc\n    CIDR: 10.0.0.0/16\n    Tag: vpc-1\"]\n```\n\nSources: [network-conf.tf:1-8]()\n\n## Subnet Configuration\n\nTwo public subnets are defined within the VPC, each in a different availability zone for high availability:\n\n| Subnet Name | CIDR Block | Availability Zone |\n|-------------|------------|-------------------|\n| public-subnet-1 | 10.0.1.0/24 | eu-north-1a |\n| public-subnet-2 | 10.0.2.0/24 | eu-north-1b |\n\nThese subnets can each accommodate up to 256 IP addresses (10.0.1.0 - 10.0.1.255 and 10.0.2.0 - 10.0.2.255 respectively).\n\n```mermaid\ngraph TD\n    VPC[\"aws_vpc.mian-Vpc\n    CIDR: 10.0.0.0/16\"]\n    \n    PS1[\"aws_subnet.public-subnet-1\n    CIDR: 10.0.1.0/24\n    AZ: eu-north-1a\"]\n    \n    PS2[\"aws_subnet.public-subnet-2\n    CIDR: 10.0.2.0/24\n    AZ: eu-north-1b\"]\n    \n    VPC --\u003e PS1\n    VPC --\u003e PS2\n```\n\nSources: [network-conf.tf:10-26]()\n\n## Gateway Configuration\n\n### Internet Gateway\n\nAn Internet Gateway is attached to the VPC to allow communication between resources in the VPC and the Internet. This is a fundamental component for enabling internet access for public-facing applications.\n\n```mermaid\ngraph TD\n    VPC[\"aws_vpc.mian-Vpc\"]\n    IG[\"aws_internet_gateway.ig\n    Tag: Internet Gateway\"]\n    \n    VPC --\u003e IG\n```\n\nSources: [network-conf.tf:28-34]()\n\n### NAT Gateway\n\nA NAT Gateway is deployed in public-subnet-1 to allow outbound internet access for resources in private subnets (if any are added later). It uses an Elastic IP address for a static public IP.\n\n```mermaid\ngraph TD\n    PS1[\"aws_subnet.public-subnet-1\"]\n    EIP[\"aws_eip.nat_gateway\"]\n    NAT[\"aws_nat_gateway.main-nat\n    Tag: gw NAT\"]\n    IG[\"aws_internet_gateway.ig\"]\n    \n    PS1 --\u003e NAT\n    EIP --\u003e NAT\n    IG --\u003e EIP\n```\n\nSources: [network-conf.tf:36-50]()\n\n## Routing Configuration\n\nA route table named \"routing-table\" is defined to direct traffic from the subnets to the NAT Gateway for outbound internet access. This routing table is associated with both public subnets.\n\n```mermaid\ngraph TD\n    VPC[\"aws_vpc.mian-Vpc\"]\n    RT[\"aws_route_table.routing-table\n    Tag: Public Route Table\"]\n    PS1[\"aws_subnet.public-subnet-1\"]\n    PS2[\"aws_subnet.public-subnet-2\"]\n    NAT[\"aws_nat_gateway.main-nat\"]\n    RTA1[\"aws_route_table_association.public-associate-table-1\"]\n    RTA2[\"aws_route_table_association.public-associate-table-2\"]\n    \n    VPC --\u003e RT\n    NAT --\u003e |Default route: 0.0.0.0/0| RT\n    RT --\u003e |association| RTA1\n    RT --\u003e |association| RTA2\n    PS1 --\u003e RTA1\n    PS2 --\u003e RTA2\n```\n\nNote: The configuration includes a commented-out line that would have routed traffic directly through the Internet Gateway instead of the NAT Gateway. The current configuration routes all traffic (0.0.0.0/0) through the NAT Gateway.\n\nSources: [network-conf.tf:51-72]()\n\n## Security Group Configuration\n\nA security group named \"sec_group\" is configured to control inbound traffic to resources within the VPC. The current configuration permits:\n\n| Port | Protocol | Source | Purpose |\n|------|----------|--------|---------|\n| 80 | TCP | 0.0.0.0/0 | HTTP traffic |\n| 443 | TCP | 0.0.0.0/0 | HTTPS traffic |\n\nIt's worth noting that SSH access (port 22) is commented out in the configuration, indicating that direct SSH access is not currently enabled but could be if uncommented.\n\n```mermaid\ngraph TD\n    VPC[\"aws_vpc.mian-Vpc\"]\n    SG[\"aws_security_group.sec_group\n    Name: sec_group\"]\n    HTTP[\"Ingress: Port 80 (HTTP)\"]\n    HTTPS[\"Ingress: Port 443 (HTTPS)\"]\n    \n    VPC --\u003e SG\n    SG --\u003e HTTP\n    SG --\u003e HTTPS\n```\n\nSources: [network-conf.tf:73-99]()\n\n## Network Traffic Flow\n\nThe following diagram illustrates how network traffic flows through the infrastructure:\n\n```mermaid\nsequenceDiagram\n    participant Internet as Internet\n    participant IG as Internet Gateway (ig)\n    participant PS as Public Subnets\n    participant NAT as NAT Gateway (main-nat)\n    participant SG as Security Group (sec_group)\n    participant Resources as AWS Resources (e.g., ALB, Lambda)\n    \n    Internet-\u003e\u003eIG: Inbound traffic\n    IG-\u003e\u003ePS: Traffic enters VPC\n    PS-\u003e\u003eSG: Traffic passes through security group\n    SG-\u003e\u003eResources: Allow HTTP/HTTPS (ports 80/443)\n    Resources-\u003e\u003eNAT: Outbound traffic\n    NAT-\u003e\u003eInternet: Traffic to external services\n```\n\nSources: [network-conf.tf:1-99]()\n\n## Integration with Other Infrastructure Components\n\nThe network infrastructure serves as the foundation for the application's serverless architecture. The public subnets host the Application Load Balancer which routes traffic to Lambda functions. The security group ensures that only appropriate traffic can reach these application components.\n\n```mermaid\ngraph TD\n    subgraph \"Network Infrastructure\"\n        VPC[\"aws_vpc.mian-Vpc\"]\n        PS1[\"public-subnet-1\"]\n        PS2[\"public-subnet-2\"]\n        SG[\"sec_group\"]\n    end\n    \n    subgraph \"Application Components\"\n        ALB[\"Application Load Balancer\"]\n        Lambda[\"Lambda Functions\"]\n    end\n    \n    subgraph \"API Layer\"\n        APIGW[\"API Gateway\"]\n        VPCLink[\"VPC Link\"]\n    end\n    \n    VPC --\u003e PS1\n    VPC --\u003e PS2\n    PS1 --\u003e ALB\n    PS2 --\u003e ALB\n    SG --\u003e ALB\n    ALB --\u003e Lambda\n    APIGW --\u003e VPCLink\n    VPCLink --\u003e ALB\n```\n\nSources: [network-conf.tf:1-99]()"])</script><script>self.__next_f.push([1,"20:T24ab,"])</script><script>self.__next_f.push([1,"# API Gateway and Lambda Integration\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [main.tf](main.tf)\n- [modules/api-gateway/main.tf](modules/api-gateway/main.tf)\n- [modules/api-gateway/variables.tf](modules/api-gateway/variables.tf)\n- [modules/api-gatway2/main.tf](modules/api-gatway2/main.tf)\n- [modules/api-gatway2/variables.tf](modules/api-gatway2/variables.tf)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document describes the configuration and architecture of the API Gateway and Lambda integration within the Iac-app infrastructure. It covers how the API Gateway HTTP API (v2) is configured to route HTTP requests to Lambda functions through a VPC Link and Application Load Balancer. For information about the Lambda functions themselves, see [Lambda Functions](#3.4). For details about the network infrastructure that supports this integration, see [Network Infrastructure](#3.2).\n\n## Architecture Overview\n\nThe Iac-app implements a serverless architecture that uses API Gateway as the entry point for HTTP requests, which are then routed to Lambda functions for processing. The architecture uses a VPC Link and Application Load Balancer as intermediaries to enhance security and provide better traffic management.\n\n```mermaid\nflowchart TD\n    subgraph \"Client\"\n        client[\"HTTP Client\"]\n    end\n\n    subgraph \"API Gateway\"\n        api[\"aws_apigatewayv2_api: dls-http-api\"]\n        route[\"aws_apigatewayv2_route: GET /devices\"]\n        integration[\"aws_apigatewayv2_integration\"]\n        vpclink[\"aws_apigatewayv2_vpc_link: vpclink-lb-gateway2\"]\n    end\n\n    subgraph \"Load Balancer\"\n        alb[\"aws_lb: main-lb\"]\n        listener[\"aws_lb_listener: main-listener\"]\n        targetgroup[\"aws_lb_target_group: lambda-target-group\"]\n    end\n\n    subgraph \"Lambda\"\n        lambda[\"aws_lambda_function: saying-hello\"]\n        permission[\"aws_lambda_permission: with_lb\"]\n    end\n\n    client --\u003e|\"HTTP Request\"| api\n    api --\u003e route\n    route --\u003e integration\n    integration --\u003e|\"via VPC Link\"| vpclink\n    vpclink --\u003e listener\n    listener --\u003e targetgroup\n    targetgroup --\u003e|\"Invoke\"| lambda\n    permission --\u003e|\"Allows invocation\"| lambda\n```\n\nSources: [main.tf:92-105](), [modules/api-gatway2/main.tf:1-33]()\n\n## Components and Configuration\n\n### API Gateway HTTP API (v2)\n\nThe system uses API Gateway HTTP API (v2) as the entry point for all client requests. This implementation provides a more streamlined and cost-effective approach compared to the REST API (v1).\n\n```mermaid\nflowchart LR\n    subgraph \"API Gateway HTTP API\"\n        api[\"aws_apigatewayv2_api: dls-http-api\"]\n        route[\"aws_apigatewayv2_route: GET /devices\"]\n        integration[\"aws_apigatewayv2_integration\"]\n        stage[\"aws_apigatewayv2_stage: prod-stage\"]\n    end\n\n    api --\u003e route\n    route --\u003e|\"target\"| integration\n    api --\u003e stage\n```\n\nSources: [modules/api-gatway2/main.tf:2-33]()\n\nKey components:\n\n1. **HTTP API**: Created with protocol type \"HTTP\"\n   ```\n   aws_apigatewayv2_api.dls-gatway2\n   ```\n\n2. **Integration**: Connects the API to the Application Load Balancer\n   ```\n   aws_apigatewayv2_integration.dls-gatway-lb-integration\n   ```\n\n3. **Route**: Defines the path and method for the API endpoint\n   ```\n   aws_apigatewayv2_route.devices-routing (GET /devices)\n   ```\n\n4. **Stage**: Deployment stage for the API\n   ```\n   aws_apigatewayv2_stage.prod-stage\n   ```\n\nSources: [modules/api-gatway2/main.tf:2-33]()\n\n### VPC Link\n\nThe VPC Link provides a secure connection between the API Gateway and resources inside the VPC, such as the Application Load Balancer.\n\n```\naws_apigatewayv2_vpc_link.vpclink-lb-gateway2\n```\n\nThis resource is configured with:\n- Security groups: None specified\n- Subnet IDs: Public subnets (public-subnet-1 and public-subnet-2)\n\nSources: [main.tf:93-100]()\n\n### Application Load Balancer\n\nThe Application Load Balancer serves as an intermediary between the VPC Link and the Lambda function.\n\n| Resource | Type | Purpose |\n|----------|------|---------|\n| `aws_lb.main-lb` | Application | Internal load balancer that routes requests to the Lambda target group |\n| `aws_lb_listener.main-listener` | HTTP Listener | Listens on port 80 and forwards to the Lambda target group |\n| `aws_lb_target_group.lambda-target-group` | Lambda Target Group | Target group specifically configured for Lambda invocation |\n| `aws_lb_target_group_attachment` | Attachment | Connects the Lambda function to the target group |\n\nSources: [main.tf:3-40]()\n\n### Lambda Function and Permissions\n\nThe Lambda function is configured to receive and process requests from the Application Load Balancer.\n\n```mermaid\nflowchart TD\n    subgraph \"Lambda Configuration\"\n        lambda[\"aws_lambda_function: saying-hello\"]\n        role[\"aws_iam_role: iam_for_lambda\"]\n        permission[\"aws_lambda_permission: with_lb\"]\n    end\n\n    subgraph \"Target Group\"\n        targetgroup[\"aws_lb_target_group: lambda-target-group\"]\n        attachment[\"aws_lb_target_group_attachment\"]\n    end\n\n    targetgroup --\u003e attachment\n    attachment --\u003e lambda\n    permission --\u003e|\"Allows ALB to invoke\"| lambda\n    role --\u003e|\"Execution role\"| lambda\n```\n\nSources: [main.tf:42-89]()\n\nKey components:\n\n1. **Lambda Function**: Configured with Node.js 20.x runtime\n   ```\n   aws_lambda_function.main-lambda-function\n   ```\n\n2. **Lambda Permission**: Grants the ALB permission to invoke the function\n   ```\n   aws_lambda_permission.with_lb\n   ```\n\n3. **IAM Role**: Provides execution permissions for the Lambda function\n   ```\n   aws_iam_role.iam_for_lambda\n   ```\n\nSources: [main.tf:42-89]()\n\n### IAM Roles and Policies\n\nThe API Gateway integration requires appropriate IAM roles and policies to interact with AWS services.\n\n| Resource | Purpose |\n|----------|---------|\n| `aws_iam_role.api_gateway_role` | Role assumed by API Gateway |\n| `aws_iam_policy.api_gateway_policy` | Policy that grants API Gateway permissions to interact with the ALB |\n| `aws_iam_role_policy_attachment` | Attaches the policy to the role |\n\nThe policy includes permissions to:\n- Describe load balancers and listeners\n- Create, delete, and modify listeners\n- Create, delete, and modify rules\n- Register and deregister targets\n\nSources: [main.tf:107-154]()\n\n## Integration Flow\n\nThe request processing flow through the API Gateway to Lambda integration follows these steps:\n\n```mermaid\nsequenceDiagram\n    participant Client\n    participant APIGateway as \"API Gateway (aws_apigatewayv2_api)\"\n    participant VPCLink as \"VPC Link (aws_apigatewayv2_vpc_link)\"\n    participant ALB as \"Application Load Balancer (aws_lb)\"\n    participant TargetGroup as \"Lambda Target Group (aws_lb_target_group)\"\n    participant Lambda as \"Lambda Function (aws_lambda_function)\"\n\n    Client-\u003e\u003eAPIGateway: HTTP GET /devices\n    APIGateway-\u003e\u003eAPIGateway: Route to integration\n    APIGateway-\u003e\u003eVPCLink: Forward request\n    VPCLink-\u003e\u003eALB: Route to ALB Listener\n    ALB-\u003e\u003eTargetGroup: Forward to Target Group\n    TargetGroup-\u003e\u003eLambda: Invoke Lambda function\n    Lambda-\u003e\u003eTargetGroup: Return response\n    TargetGroup-\u003e\u003eALB: Forward response\n    ALB-\u003e\u003eVPCLink: Return to VPC Link\n    VPCLink-\u003e\u003eAPIGateway: Return to API Gateway\n    APIGateway-\u003e\u003eClient: HTTP Response\n```\n\nSources: [main.tf:3-105](), [modules/api-gatway2/main.tf:1-33]()\n\n## Technical Implementation Details\n\n### API Gateway Module Configuration\n\nThe API Gateway v2 module (`api-gatway2`) is implemented with the following configuration:\n\n```\nmodule \"api-gatway2-module\" {\n  source              = \"./modules/api-gatway2\"\n  lb-listener-arn     = aws_lb_listener.main-listener.arn\n  vpclink-lb-gateway2 = aws_apigatewayv2_vpc_link.vpclink-lb-gateway2.id\n}\n```\n\nThe module accepts two parameters:\n- `lb-listener-arn`: The ARN of the ALB listener\n- `vpclink-lb-gateway2`: The ID of the VPC Link\n\nSources: [main.tf:101-105](), [modules/api-gatway2/variables.tf:1-9]()\n\n### Integration Type and Method\n\nThe API Gateway integration is configured as an HTTP_PROXY integration type, which means it passes the request directly to the backend with minimal transformation.\n\n```\nintegration_type    = \"HTTP_PROXY\"\nintegration_uri     = var.lb-listener-arn\nintegration_method  = \"ANY\"\nconnection_type     = \"VPC_LINK\"\nconnection_id       = var.vpclink-lb-gateway2\n```\n\nSources: [modules/api-gatway2/main.tf:9-19]()\n\n## Notes on Alternative Implementation\n\nWhile the current implementation uses API Gateway HTTP API (v2), there is a commented-out section in the main.tf file (lines 156-261) that shows an alternative implementation using API Gateway REST API (v1). This indicates that the system may have evolved from using REST API to HTTP API, or that both implementations are supported but only one is active at a time.\n\nSources: [main.tf:156-261]()\n\n## Summary\n\nThe API Gateway and Lambda integration in this infrastructure follows a well-architected pattern:\n\n1. The API Gateway HTTP API serves as the public entry point\n2. Requests are securely routed to private resources through a VPC Link\n3. The Application Load Balancer provides additional traffic management\n4. The Lambda Target Group enables proper invocation of the Lambda function\n5. IAM roles and policies ensure proper permissions across the components\n\nThis architecture provides a scalable, secure, and maintainable approach to exposing Lambda functions via HTTP endpoints."])</script><script>self.__next_f.push([1,"21:T1cee,"])</script><script>self.__next_f.push([1,"# Lambda Functions\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [index.mjs](index.mjs)\n- [lambda_function_payload.zip](lambda_function_payload.zip)\n- [main.tf](main.tf)\n\n\u003c/details\u003e\n\n\n\nThis document describes the Lambda functions used in the Iac-app project, their configuration, and how they integrate with other AWS resources. The primary focus is on the implementation and deployment of serverless functions that serve as the backend logic for the application's API endpoints.\n\nFor information about API Gateway configuration and its integration with Lambda, see [API Gateway and Lambda Integration](#3.3).\n\n## Overview\n\nThe Iac-app repository implements a serverless architecture using AWS Lambda for compute resources. The Lambda functions provide HTTP responses to requests received via both Application Load Balancer (ALB) and API Gateway, serving as the application's backend logic layer.\n\n```mermaid\ngraph TD\n    subgraph \"Client Request Flow\"\n        Client[\"Client\"]\n        APIGW[\"API Gateway\"]\n        VPC[\"VPC Link\"]\n        ALB[\"Application Load Balancer\"]\n        Lambda[\"Lambda Function: saying-hello\"]\n        IAM[\"IAM Role: iam_for_lambda\"]\n    end\n\n    Client --\u003e|\"HTTP Request\"| APIGW\n    APIGW --\u003e|\"Forward Request\"| VPC\n    VPC --\u003e|\"Route to\"| ALB\n    ALB --\u003e|\"Invoke via Target Group\"| Lambda\n    Lambda --\u003e|\"Assumes\"| IAM\n    Lambda --\u003e|\"JSON Response\"| ALB\n    ALB --\u003e|\"HTTP Response\"| APIGW\n    APIGW --\u003e|\"HTTP Response\"| Client\n```\n\nSources: [main.tf:3-48](), [main.tf:79-89]()\n\n## Lambda Function Implementation\n\n### Lambda Source Code\n\nThe Lambda function is implemented as a simple Node.js function that returns a \"Hello from Lambda!\" message. The function uses the modern ES modules syntax with the `.mjs` file extension.\n\n```mermaid\ngraph LR\n    Handler[\"handler()\"] --\u003e|\"Returns\"| Response[\"JSON Response\"]\n    Response --\u003e|\"Contains\"| StatusCode[\"statusCode: 200\"]\n    Response --\u003e|\"Contains\"| Body[\"body: 'Hello from Lambda!'\"]\n```\n\nSources: [index.mjs:1-8]()\n\nThe handler function is the entry point for the Lambda execution and follows the standard AWS Lambda pattern with an async function that receives an event object and returns a response with statusCode and body.\n\n### IAM Role Configuration\n\nFor the Lambda function to execute properly, it requires an IAM role with appropriate permissions. The infrastructure defines an execution role for the Lambda function:\n\n| Resource | Name | Purpose |\n|----------|------|---------|\n| aws_iam_role | iam_for_lambda | Provides execution permissions for the Lambda function |\n| aws_iam_policy_document | assume_role | Defines trust relationship allowing Lambda service to assume the role |\n\nSources: [main.tf:55-71]()\n\n### Lambda Function Definition\n\nThe Lambda function is defined in Terraform with specific configuration parameters:\n\n```mermaid\ngraph TD\n    LambdaFunction[\"aws_lambda_function: main-lambda-function\"]\n    ZipFile[\"lambda_function_payload.zip\"]\n    Role[\"aws_iam_role: iam_for_lambda\"]\n    Handler[\"index.handler\"]\n    Runtime[\"nodejs20.x\"]\n    Storage[\"Ephemeral Storage: 512 MB\"]\n    \n    ZipFile --\u003e|\"Deployment Package\"| LambdaFunction\n    Role --\u003e|\"Execution Role\"| LambdaFunction\n    Handler --\u003e|\"Entry Point\"| LambdaFunction\n    Runtime --\u003e|\"Execution Environment\"| LambdaFunction\n    Storage --\u003e|\"Memory Allocation\"| LambdaFunction\n```\n\nSources: [main.tf:79-89]()\n\nThe Lambda function's key configurations include:\n- Function name: `saying-hello`\n- Runtime: Node.js 20.x\n- Handler: `index.handler` (refers to the handler function in index.mjs)\n- Deployment package: ZIP file containing the Lambda code\n- Ephemeral storage: 512 MB (minimum required storage)\n\n## Lambda Function Packaging\n\nThe Lambda function code is packaged into a ZIP file for deployment using the Terraform `archive_file` data source:\n\n| Resource | Type | Source | Output |\n|----------|------|--------|--------|\n| archive_file | zip | index.mjs | lambda_function_payload.zip |\n\nSources: [main.tf:73-77](), [lambda_function_payload.zip]()\n\nThis process automatically packages the single JavaScript file into a deployment package that AWS Lambda can execute.\n\n## Integration with AWS Resources\n\n### Application Load Balancer Integration\n\nThe Lambda function is integrated with an Application Load Balancer (ALB) through a target group, allowing HTTP traffic to be routed to the serverless function:\n\n```mermaid\ngraph TD\n    subgraph \"ALB Integration\"\n        ALB[\"aws_lb: main-lb\"]\n        Listener[\"aws_lb_listener: main-listener\"]\n        TargetGroup[\"aws_lb_target_group: lambda-target-group\"]\n        Attachment[\"aws_lb_target_group_attachment\"]\n        Permission[\"aws_lambda_permission: with_lb\"]\n        Lambda[\"aws_lambda_function: main-lambda-function\"]\n    end\n    \n    ALB --\u003e|\"References\"| Listener\n    Listener --\u003e|\"Default Action\"| TargetGroup\n    TargetGroup --\u003e|\"Target Type: lambda\"| Attachment\n    Lambda --\u003e|\"Target ID\"| Attachment\n    Permission --\u003e|\"Allows\"| Attachment\n    Permission --\u003e|\"Grants\"| Lambda\n```\n\nSources: [main.tf:3-48]()\n\nKey components of this integration:\n1. An Application Load Balancer (`main-lb`)\n2. A listener on port 80 that forwards to the target group\n3. A target group configured for Lambda targets\n4. A target group attachment that connects the Lambda function to the target group\n5. Lambda permission that allows the ALB to invoke the function\n\n### API Gateway Integration\n\nThe Lambda function is accessible through API Gateway via a VPC Link that connects to the ALB:\n\n```mermaid\ngraph TD\n    subgraph \"API Gateway Integration\"\n        VPCL[\"aws_apigatewayv2_vpc_link: vpclink-lb-gateway2\"]\n        APIMod[\"module: api-gatway2-module\"]\n        ALBList[\"aws_lb_listener: main-listener\"]\n        Lambda[\"aws_lambda_function: main-lambda-function\"]\n        IAMRole[\"aws_iam_role: api_gateway_role\"]\n        IAMPolicy[\"aws_iam_policy: api_gateway_policy\"]\n    end\n    \n    VPCL --\u003e|\"References\"| APIMod\n    ALBList --\u003e|\"References\"| APIMod\n    APIMod --\u003e|\"Indirect Invocation\"| Lambda\n    IAMRole --\u003e|\"Assumes\"| IAMPolicy\n    IAMPolicy --\u003e|\"Allows ELB Actions\"| APIMod\n```\n\nSources: [main.tf:93-154]()\n\nThe API Gateway integration uses:\n1. A VPC Link that connects the API Gateway to resources in the VPC\n2. An API Gateway module that configures the API endpoints\n3. IAM roles and policies that allow API Gateway to interact with the ALB\n\n## Permissions\n\nThe Lambda function requires specific permissions to operate correctly:\n\n1. **Execution Role**: Allows the Lambda service to assume a role and execute the function\n\n2. **ALB Permission**: Allows the Application Load Balancer to invoke the Lambda function:\n\n```\naws_lambda_permission.with_lb:\n  - Action: lambda:InvokeFunction\n  - Principal: elasticloadbalancing.amazonaws.com\n  - Source: Target Group ARN\n```\n\nSources: [main.tf:42-48]()\n\n## Conclusion\n\nThe Lambda function in this infrastructure serves as a simple HTTP endpoint that returns a \"Hello from Lambda!\" message. It is accessible through both an Application Load Balancer and API Gateway, providing flexibility in how clients can interact with the function.\n\nThe function is deployed through Terraform as part of the infrastructure deployment process, with its code packaged into a ZIP file. The IAM roles and permissions ensure that only authorized AWS services can invoke the function."])</script><script>self.__next_f.push([1,"22:T207c,"])</script><script>self.__next_f.push([1,"# Environment Management\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.github/workflows/deployment.yaml](.github/workflows/deployment.yaml)\n- [providers.tf](providers.tf)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document describes how the Iac-app repository manages different infrastructure environments (Development and Production) using Terraform workspaces. It covers environment isolation, automated environment selection, and state management practices. For information about the overall AWS infrastructure architecture, see [AWS Infrastructure Architecture](#3), and for details on how the CI/CD pipeline deploys to these environments, see [CI/CD Pipeline](#2).\n\n## Environment Management Overview\n\nThe repository implements environment isolation through Terraform workspaces, allowing the same infrastructure code to deploy to separate Dev and Prod environments while maintaining distinct state files for each. The CI/CD pipeline automatically selects the appropriate environment based on Git branch context.\n\n```mermaid\nflowchart TD\n    subgraph \"Environment Management System\"\n        TF[\"Terraform Core\"]\n        WS[\"Terraform Workspaces\"]\n        S3[\"S3 Backend Storage\"]\n        GHA[\"GitHub Actions Workflow\"]\n    end\n\n    subgraph \"Environments\"\n        DEV[\"Development Environment\"]\n        PROD[\"Production Environment\"]\n    end\n\n    GHA --\u003e|\"Selects workspace\\nbased on branch\"| WS\n    WS --\u003e|\"Creates/manages\"| DEV\n    WS --\u003e|\"Creates/manages\"| PROD\n    WS --\u003e|\"Stores isolated state\"| S3\n    TF --\u003e|\"Uses workspace context\\nfor deployment\"| WS\n```\n\nSources: [.github/workflows/deployment.yaml:75-86](), [providers.tf:9-15]()\n\n## Terraform Workspace Implementation\n\nTerraform workspaces provide isolated state management while using the same infrastructure code. Each workspace maintains separate state files in the S3 backend, allowing for independent management of different environments.\n\n### Workspace Configuration\n\nThe project uses an S3 bucket to store Terraform state files for each workspace, providing durability and enabling collaboration across team members.\n\n```mermaid\nflowchart LR\n    subgraph \"S3 Backend\"\n        BUCKET[\"mustafa-tf-state2025\"]\n        KEY[\"env/state/terraform.tfstate\"]\n        DEV_STATE[\"env/state/terraform.tfstate.d/Dev\"]\n        PROD_STATE[\"env/state/terraform.tfstate.d/Prod\"]\n    end\n\n    subgraph \"Terraform Workspaces\"\n        DEV_WS[\"Dev Workspace\"]\n        PROD_WS[\"Prod Workspace\"]\n    end\n\n    DEV_WS --\u003e|\"State stored in\"| DEV_STATE\n    PROD_WS --\u003e|\"State stored in\"| PROD_STATE\n    KEY --\u003e|\"Default state path\"| BUCKET\n    DEV_STATE --\u003e|\"Dev state path\"| BUCKET\n    PROD_STATE --\u003e|\"Prod state path\"| BUCKET\n```\n\nSources: [providers.tf:9-15]()\n\n### Backend Configuration\n\nThe S3 backend is configured in `providers.tf` without environment-specific parameters, as the workspace mechanism automatically organizes state files in the bucket.\n\n```\nterraform {\n  backend \"s3\" {\n    bucket = \"mustafa-tf-state2025\"\n    key    = \"env/state/terraform.tfstate\"\n    region = \"eu-north-1\"\n  }\n}\n```\n\nSources: [providers.tf:9-15]()\n\n## Automatic Environment Selection\n\nThe CI/CD pipeline implements automated environment selection based on Git branch context. This ensures consistent deployment to the correct environment without manual intervention.\n\n### Environment Selection Logic\n\nThe deployment workflow automatically determines which environment to use based on the Git context:\n\n| Git Context | Selected Environment | Workspace |\n|-------------|---------------------|-----------|\n| Push to main branch | Production | Prod |\n| Pull request | Development | Dev |\n| Manual trigger | Development (default) | Dev |\n\nSources: [.github/workflows/deployment.yaml:75-86]()\n\n### Workflow Implementation\n\nThe GitHub Actions workflow uses conditional logic to select the appropriate Terraform workspace:\n\n```mermaid\nflowchart TD\n    START[\"Start Deployment\"]\n    CHECK{\"Is event 'push' AND\\nbranch is 'main'?\"}\n    PROD[\"Select/Create 'Prod' Workspace\"]\n    DEV[\"Select/Create 'Dev' Workspace\"]\n    APPLY[\"Apply Terraform Configuration\"]\n    \n    START --\u003e CHECK\n    CHECK --\u003e|\"Yes\"| PROD\n    CHECK --\u003e|\"No\"| DEV\n    PROD --\u003e APPLY\n    DEV --\u003e APPLY\n```\n\nThe workspace selection command creates the workspace if it doesn't exist, ensuring consistent environment availability:\n\n```\nterraform workspace select -or-create [Workspace]\n```\n\nSources: [.github/workflows/deployment.yaml:75-86]()\n\n## Environment-Specific Resources\n\nWhen Terraform applies changes, it creates resources prefixed or tagged with the workspace name, providing clear differentiation between environments.\n\n### Resource Naming Pattern\n\n```mermaid\nclassDiagram\n    class \"Terraform Resource\" {\n        +name: String\n        +tags: Map\n        +properties: Map\n    }\n    \n    class \"Dev Environment Resources\" {\n        +name: \"dev-[resource-name]\"\n        +tags: {Environment: \"Dev\"}\n        +properties: Dev configuration\n    }\n    \n    class \"Prod Environment Resources\" {\n        +name: \"prod-[resource-name]\"\n        +tags: {Environment: \"Prod\"}\n        +properties: Prod configuration\n    }\n    \n    \"Terraform Resource\" \u003c|-- \"Dev Environment Resources\"\n    \"Terraform Resource\" \u003c|-- \"Prod Environment Resources\"\n```\n\n### Workspace-Aware Configuration\n\nThe workspace variable (`terraform.workspace`) can be used in Terraform code to conditionally configure resources based on the environment:\n\n```\nlocals {\n  environment = terraform.workspace\n  is_prod = terraform.workspace == \"Prod\"\n  \n  # Environment-specific configuration\n  instance_type = local.is_prod ? \"t3.medium\" : \"t3.small\"\n  min_capacity = local.is_prod ? 2 : 1\n}\n```\n\n## Environment Promotion Model\n\nThe project follows a promotion model where changes are first applied to the Dev environment through pull requests, then promoted to Production through merges to the main branch.\n\n```mermaid\nsequenceDiagram\n    actor Developer\n    participant FeatureBranch as \"Feature Branch\"\n    participant DevEnv as \"Dev Environment\"\n    participant MainBranch as \"Main Branch\"\n    participant ProdEnv as \"Prod Environment\"\n    \n    Developer-\u003e\u003eFeatureBranch: Commit changes\n    Developer-\u003e\u003eFeatureBranch: Create PR\n    FeatureBranch-\u003e\u003eDevEnv: Deploy to Dev (terraform apply)\n    Note over DevEnv: Testing in Dev\n    Developer-\u003e\u003eMainBranch: Merge PR to main\n    MainBranch-\u003e\u003eProdEnv: Deploy to Prod (terraform apply)\n    Note over ProdEnv: Changes promoted to production\n```\n\nSources: [.github/workflows/deployment.yaml:3-22](), [.github/workflows/deployment.yaml:75-86]()\n\n## Working with Environments\n\n### Environment Operations\n\n| Operation | Command/Action | Description |\n|-----------|---------------|-------------|\n| View current workspace | `terraform workspace show` | Displays currently selected workspace |\n| List all workspaces | `terraform workspace list` | Lists all available workspaces |\n| Create new workspace | `terraform workspace new [name]` | Creates a new workspace |\n| Switch workspace | `terraform workspace select [name]` | Switches to specified workspace |\n| Deploy to Dev | Create PR | Automatically deploys to Dev workspace |\n| Deploy to Prod | Merge to main | Automatically deploys to Prod workspace |\n| Manual deployment | Trigger workflow | Use GitHub Actions manual trigger with workspace selection |\n\n### Manual Environment Management\n\nFor manual environment operations, the GitHub Actions workflow provides options through the workflow dispatch feature:\n\n- Apply: Deploys infrastructure to the selected environment\n- Destroy: Tears down infrastructure in the selected environment\n- Apply and Destroy: Deploys infrastructure and then destroys it (useful for testing)\n\nSources: [.github/workflows/deployment.yaml:4-14](), [.github/workflows/deployment.yaml:88-93]()\n\n## Best Practices\n\n1. **Always create pull requests** for changes to ensure they are tested in Dev first\n2. **Never modify Prod directly** - all changes should flow through the promotion model\n3. **Use branch naming conventions** that clearly indicate the feature or fix being developed\n4. **Review terraform plan output** before applying changes to either environment\n5. **Use environment-specific variables** for configuration that varies between environments"])</script><script>self.__next_f.push([1,"23:T1cf3,"])</script><script>self.__next_f.push([1,"# Outputs and Integration Points\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [modules/api-gateway/output.tf](modules/api-gateway/output.tf)\n- [modules/api-gatway2/output.tf](modules/api-gatway2/output.tf)\n- [output.tf](output.tf)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document details the infrastructure outputs exposed by the Iac-app codebase and how they serve as integration points with external systems. Terraform outputs provide essential information about deployed resources, enabling other systems to interact with the infrastructure without requiring direct access to the Terraform state or AWS Console.\n\nThe outputs documented here represent the primary integration endpoints for the AWS infrastructure provisioned by this codebase, including load balancer DNS names and API Gateway endpoints.\n\nSources: [output.tf:1-8](), [modules/api-gateway/output.tf:1-3](), [modules/api-gatway2/output.tf:1-3]()\n\n## Available Outputs Overview\n\nThe infrastructure exposes three key outputs that serve as integration points:\n\n| Output Name | Description | Source |\n|-------------|-------------|--------|\n| `load_balancer_dns_name` | DNS name of the main load balancer | Root module |\n| `invoking-url-gateway2` | Invocation URL for API Gateway v2 | Root module (from api-gatway2 module) |\n| `invoking-url` | Invocation URL for API Gateway v1 | api-gateway module (internal) |\n\nThese outputs represent the primary endpoints through which client applications and other systems can interact with the AWS resources provisioned by this infrastructure.\n\nSources: [output.tf:2-8](), [modules/api-gateway/output.tf:1-3](), [modules/api-gatway2/output.tf:1-3]()\n\n## Output Structure and Flow\n\nThe following diagram illustrates how outputs are structured and flow through the codebase:\n\n```mermaid\nflowchart TD\n    subgraph \"Root Module\"\n        RT[\"root/output.tf\"]\n        LB[\"aws_lb.main-lb\"]\n        MOD2[\"module.api-gatway2-module\"]\n    end\n    \n    subgraph \"API Gateway Module\"\n        APG[\"aws_api_gateway_stage.stage-prod\"]\n        OUT1[\"invoking-url output\"]\n    end\n    \n    subgraph \"API Gateway v2 Module\"\n        APG2[\"aws_apigatewayv2_stage.prod-stage\"]\n        OUT2[\"invoking output\"]\n    end\n    \n    subgraph \"Terraform Outputs\"\n        TFO1[\"load_balancer_dns_name\"]\n        TFO2[\"invoking-url-gateway2\"]\n    end\n    \n    LB --\u003e|\"dns_name\"| RT\n    APG --\u003e|\"invoke_url\"| OUT1\n    APG2 --\u003e|\"invoke_url\"| OUT2\n    OUT2 --\u003e|\"referenced by\"| MOD2\n    MOD2 --\u003e|\"invoking\"| RT\n    \n    RT --\u003e|\"outputs\"| TFO1\n    RT --\u003e|\"outputs\"| TFO2\n```\n\nSources: [output.tf:2-8](), [modules/api-gateway/output.tf:1-3](), [modules/api-gatway2/output.tf:1-3]()\n\n## Detailed Output Descriptions\n\n### 1. Load Balancer DNS Name\n\nThe `load_balancer_dns_name` output exposes the DNS name of the Application Load Balancer (ALB):\n\n```\noutput \"load_balancer_dns_name\" {\n  value = aws_lb.main-lb.dns_name\n}\n```\n\nThis DNS name can be used to directly access the load balancer, which routes traffic to the backend Lambda functions. It serves as a primary integration point for applications that need to communicate with services behind the load balancer.\n\nSources: [output.tf:2-4]()\n\n### 2. API Gateway v2 Invocation URL\n\nThe `invoking-url-gateway2` output exposes the URL endpoint for the API Gateway v2:\n\n```\noutput \"invoking-url-gateway2\" {\n  value = module.api-gatway2-module.invoking\n}\n```\n\nThis output references the `invoking` output from the `api-gatway2` module, which in turn exposes the invoke URL of the production stage of the API Gateway v2 deployment. This URL is the primary endpoint for HTTP API integrations.\n\nSources: [output.tf:6-8](), [modules/api-gatway2/output.tf:1-3]()\n\n### 3. API Gateway v1 Invocation URL\n\nThe `invoking-url` output (defined in the api-gateway module) exposes the URL endpoint for the API Gateway v1:\n\n```\noutput \"invoking-url\" {\n  value = aws_api_gateway_stage.stage-prod.invoke_url\n}\n```\n\nThis output is defined within the `api-gateway` module, providing the invoke URL for the production stage of the traditional API Gateway deployment. While this is not directly exposed at the root level, it can be accessed by modules that use the api-gateway module.\n\nSources: [modules/api-gateway/output.tf:1-3]()\n\n## Integration Architecture\n\nThe following diagram illustrates how external systems can integrate with the infrastructure using the exposed outputs:\n\n```mermaid\ngraph TD\n    subgraph \"External Systems\"\n        CLIENT[\"Client Applications\"]\n        MONITORING[\"Monitoring Tools\"]\n        OTHER[\"Other AWS Services\"]\n    end\n    \n    subgraph \"Infrastructure Outputs\"\n        ALB_DNS[\"load_balancer_dns_name\"]\n        APIGW2_URL[\"invoking-url-gateway2\"]\n    end\n    \n    subgraph \"AWS Resources\"\n        ALB[\"aws_lb.main-lb\"]\n        APIGW2[\"aws_apigatewayv2_stage.prod-stage\"]\n        LAMBDA[\"Lambda Functions\"]\n    end\n    \n    CLIENT --\u003e|\"HTTP/HTTPS requests\"| ALB_DNS\n    CLIENT --\u003e|\"HTTP API requests\"| APIGW2_URL\n    MONITORING --\u003e|\"Health checks\"| ALB_DNS\n    MONITORING --\u003e|\"API monitoring\"| APIGW2_URL\n    OTHER --\u003e|\"Service integration\"| APIGW2_URL\n    \n    ALB_DNS -.-\u003e|\"references\"| ALB\n    APIGW2_URL -.-\u003e|\"references\"| APIGW2\n    \n    ALB --\u003e|\"routes traffic to\"| LAMBDA\n    APIGW2 --\u003e|\"invokes\"| LAMBDA\n```\n\nSources: [output.tf:2-8](), [modules/api-gateway/output.tf:1-3](), [modules/api-gatway2/output.tf:1-3]()\n\n## Using the Outputs\n\n### Accessing Outputs After Deployment\n\nAfter applying the Terraform configuration, outputs can be accessed using:\n\n```bash\nterraform output load_balancer_dns_name\nterraform output invoking-url-gateway2\n```\n\n### Integration Examples\n\n1. **Web Application Integration**:\n   - Use the `load_balancer_dns_name` as the API endpoint in web applications\n   - Example: `const apiEndpoint = 'http://${load_balancer_dns_name}/api/v1';`\n\n2. **API Gateway Integration**:\n   - Use the `invoking-url-gateway2` for direct API access\n   - Example: `const apiUrl = '${invoking-url-gateway2}/resources';`\n\n3. **Monitoring Integration**:\n   - Configure health checks against the load balancer DNS name\n   - Set up API monitors for the API Gateway endpoints\n\n4. **CI/CD Pipeline Integration**:\n   - Use the output values in deployment scripts or configuration files\n   - Pass the endpoints to application builds for automatic configuration\n\nSources: [output.tf:2-8]()\n\n## Best Practices for Working with Outputs\n\n1. **Treat outputs as contracts**: Once defined and used by other systems, changes to outputs should be managed carefully to avoid breaking integrations.\n\n2. **Use descriptive names**: Output names should clearly indicate what they represent to make integration easier.\n\n3. **Document output usage**: Keep documentation updated when adding or modifying outputs to ensure integrating systems know how to use them correctly.\n\n4. **Consider sensitive outputs**: Use the `sensitive = true` attribute for outputs containing sensitive information (not currently used in this codebase but recommended for credentials or tokens).\n\nSources: [output.tf:2-8](), [modules/api-gateway/output.tf:1-3](), [modules/api-gatway2/output.tf:1-3]()\n\n## Related Resources\n\n- See [AWS Infrastructure Architecture](#3) for details about the overall AWS architecture\n- See [API Gateway and Lambda Integration](#3.3) for information about how the API Gateway connects to Lambda functions"])</script><script>self.__next_f.push([1,"16:[\"$\",\"$L17\",null,{\"repoName\":\"Mustafaibra/Iac-app\",\"wiki\":{\"metadata\":{\"repo_name\":\"Mustafaibra/Iac-app\",\"commit_hash\":\"104ebcb2\",\"generated_at\":\"2025-05-11T14:27:23.377111\"},\"pages\":[{\"page_plan\":{\"id\":\"1\",\"title\":\"Overview\"},\"content\":\"$18\"},{\"page_plan\":{\"id\":\"2\",\"title\":\"CI/CD Pipeline\"},\"content\":\"$19\"},{\"page_plan\":{\"id\":\"2.1\",\"title\":\"Deployment Workflow\"},\"content\":\"$1a\"},{\"page_plan\":{\"id\":\"2.2\",\"title\":\"Quality Gate System\"},\"content\":\"$1b\"},{\"page_plan\":{\"id\":\"2.3\",\"title\":\"Dependency Management\"},\"content\":\"$1c\"},{\"page_plan\":{\"id\":\"3\",\"title\":\"AWS Infrastructure Architecture\"},\"content\":\"$1d\"},{\"page_plan\":{\"id\":\"3.1\",\"title\":\"Provider and State Configuration\"},\"content\":\"$1e\"},{\"page_plan\":{\"id\":\"3.2\",\"title\":\"Network Infrastructure\"},\"content\":\"$1f\"},{\"page_plan\":{\"id\":\"3.3\",\"title\":\"API Gateway and Lambda Integration\"},\"content\":\"$20\"},{\"page_plan\":{\"id\":\"3.4\",\"title\":\"Lambda Functions\"},\"content\":\"$21\"},{\"page_plan\":{\"id\":\"4\",\"title\":\"Environment Management\"},\"content\":\"$22\"},{\"page_plan\":{\"id\":\"5\",\"title\":\"Outputs and Integration Points\"},\"content\":\"$23\"}]},\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]\nc:null\n10:[[\"$\",\"title\",\"0\",{\"children\":\"CI/CD Pipeline | Mustafaibra/Iac-app | DeepWiki\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"This document provides a comprehensive overview of the Continuous Integration and Continuous Deployment (CI/CD) pipeline implemented in the Iac-app repository. The pipeline automates the process of va\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:title\",\"content\":\"CI/CD Pipeline | Mustafaibra/Iac-app | DeepWiki\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:description\",\"content\":\"This document provides a comprehensive overview of the Continuous Integration and Continuous Deployment (CI/CD) pipeline implemented in the Iac"])</script><script>self.__next_f.push([1,"-app repository. The pipeline automates the process of va\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:url\",\"content\":\"https://deepwiki.com/Mustafaibra/Iac-app/2-cicd-pipeline\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:site_name\",\"content\":\"DeepWiki\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"CI/CD Pipeline | Mustafaibra/Iac-app | DeepWiki\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"This document provides a comprehensive overview of the Continuous Integration and Continuous Deployment (CI/CD) pipeline implemented in the Iac-app repository. The pipeline automates the process of va\"}],[\"$\",\"link\",\"10\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"48x48\"}],[\"$\",\"link\",\"11\",{\"rel\":\"icon\",\"href\":\"/icon.png?66aaf51e0e68c818\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"12\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?a4f658907db0ab87\",\"type\":\"image/png\",\"sizes\":\"180x180\"}]]\n"])</script></body></html>
